<!DOCTYPE html><html><head>
      <title>asteroidsGameWriteup</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////home/peter/.vscode-server/extensions/shd101wyy.markdown-preview-enhanced-0.5.13/node_modules/@shd101wyy/mume/dependencies/katex/katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="an-oop-guide-to-creating-an-asteroids-game-using-vanilla-js">An OOP guide to Creating an Asteroids Game using Vanilla JS</h1>

<p>written by aFuzzyBear.</p>
<p>I had came across this youtube video on how to create a game that is a childhood favourite of mine. The legendary Asteroids from Atari.<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup><br>
<a href="http://www.youtube.com/watch?feature=player_embedded&amp;v=H9CSWMxJx84
" target="_blank"><img src="http://img.youtube.com/vi/H9CSWMxJx84/0.jpg" alt="YouTube Video from freeCodeCamp-Asteroids Game" width="240" height="180" border="10"></a><br>
I figured why the hell not, I am getting a bit better at Javascript why not give this a shot. Credits to the instructor for making a thoroughly enjoyable code-along video tutorial of this game.</p>
<p>What made this particular tutorial &apos;enjoyable&apos; was that the instructor was using methods and techniques that I wasn&apos;t <em>taught</em> perse. So far I have been slowly learning JavaScript using <a href="https://developer.mozilla.org/en-US/docs/Learn">MDN Docs</a> and other&apos;s but predominately I am a fellow of the school of MDN.</p>
<p>As I was going along with the instructor I was find myself in a bit of an uncomfortable space. Without sounding overly critical, the instructor was using pre-ES6 standards in the script.</p>
<p>It wasn&apos;t written in &apos;strict mode&apos; and had no Object Orientated Approach towards it. Plus I was only really half satisfied with the outcome, I was wanting more, and thus began  my climb up the proverbial &apos;Mount Improbable&apos; &#x1F5FB;.</p>
<p>In a way this was what I have been learning whilst I have been meandering my way through the JavaScript Mountain Range. So I figured as a challenge to make a similar program to what was demonstrated in the video but bring it up to spec using what I have learnt to date.</p>
<h2 class="mume-header" id="lets-begin">Lets Begin</h2>

<p>I wish to let you know, I have made this script extremely verbose by using JSDocs <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>. This commenting style has a lot of benefits not only readability but also with use inside IDE&apos;s. I comment on everything, trying make my code as close to English as possible, apart from the math, which is just the nature of maths unfortunately.</p>
<p>Lets begin by getting the boilerplate stuff out the way.</p>
<p>We are going to be needing a <code>asteroidGame.html</code> file and a <code>game.js</code> script file within the same directory.</p>
<p><code>asteroidGame.html</code> should look like this:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Asteroids Game<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">canvas</span><span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token unit">vh</span><span class="token punctuation">;</span>
        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
        <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gameCanvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Huh, your browser doesn&apos;t seem to support HTML5! Sorry bud,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>game.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</pre><p>Quickly explaining what is going on here. We have a couple of basic style rules to allow the game to be applied to the full size of the viewport.<br>
Within the <code>&lt;canvas&gt;</code> element we have a fall-back tag in case the browser doesn&apos;t support the canvas element.<br>
Now load the html file through your local dev server and have it open. This was we can see the work that will be done in the JS being reflected in the browser.</p>
<p>Now the boilerplate for the <code>game.js</code> is a lot easier. At the top of the file we will be adding the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">&apos;Strict Mode&apos;</a> command to the Global Environment, being at the top, this sets the rest of the script to adhere to following  ECMAScript  standards of writing JavaScript. To enable this we place the following :</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript"><span class="token string">&apos;use strict&apos;</span><span class="token punctuation">;</span> <span class="token comment">//Placed on line 1</span>
</pre><h3 class="mume-header" id="setup-the-canvas">Setup the Canvas</h3>

<p>To set-up the canvas for the game, we first have to grab the canvas from the DOM.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;gameCanvas&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Next we set-up the context for the canvas, stating that we will be using a 2-Dimensional context instead of a 3-Dimensional one like <em>webGl</em></p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&apos;2d&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h3 class="mume-header" id="setting-up-the-animation-loop">Setting up the Animation Loop</h3>

<p>Now lets get something on the screen. To do this we will be using the <code>window.requestAnimationFrame API</code><sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> here the original tutorial had setup their own animation loop using <code>setInterval()</code> running at 30 fps which was creating a horrendous amount of <em>janking</em> motion when it was rendering. But by using the <code>window.requestAnimationFrame()</code> the performance of the script was notably improved but it forced my hand to having to do the tutorial in a completely different way.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">//place this at the bottom of the script</span>
<span class="token keyword">function</span> <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//Draw the Background -Space</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Do other stuff here</span>


    <span class="token comment">//Request animation frame</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>gameAnimationLoop<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
<span class="token comment">//Starting the Game Animation</span>
<span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>You should have a black screen that occupies the full viewport.<br>
<img src="assets/imgs/BlackCanvas.png" alt="A Black Canvas on the DOM"><br>
Next up we will be adding some functions that we will be needing throughout the script in various places so we will place those on the global scope.</p>
<h2 class="mume-header" id="functional-programming-side-of-the-script">Functional Programming side of the Script</h2>

<p>I like to keep the global variables and functions right at the top of the script.<br>
We will be rarely be changing them as we go. So its good to understand where to put the stuff that belongs in the global scope.</p>
<p>For the script we would be needing to reuse a lot of repetitive maths. Im calling this part the &apos;Functional side&apos; simply because it&apos;s as <strong>PURE</strong> as it gets.</p>
<p>The basic concept of Functional programming is that they take an input do something that will deliver the same output all the time. Keeping it pure means that once they are set their output is what we can depend on when we use them around the script.</p>
<h4 class="mume-header" id="random-number-generator">Random Number Generator</h4>

<p>Javascript has a built in &apos;random&apos; number generator but its not really easy to work with. For starters the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/model/Global_Objects/Math/random"><code>Math.random()</code></a> returns a long tailed decimal point number between 0 and 1, now that is fine if you wanted a random decimal number. But it would require to be scaled according to use.</p>
<p>So we would be making our own Random number Generator, that would return a whole number within a given range of numbers.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">/**
 * @function RandomNumber Generator
 * @param {Number} min -Lowest Number in Range
 * @param {Number} max  - Highest Number in Range
 * @returns Random Number between the range of min - max
 */</span>
<span class="token keyword">function</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span>max</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>max<span class="token operator">-</span>min<span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>Here we are creating the function that would return a random number between two arguments. This way we can generate a random number between a range of numbers, say 1-10 or 0-255 etc and it would give a random number when invoked.</p>
<p>Another function that we would be creating is a Random Decimal Number Generator where we would be curtailing the number of decimals places to save some memory overhead and reap whatever marginal performance gains that come. We would be using this to preform a couple of different purposes but one is that its really handy to determine if something should be a positive integer or a negative value depending if the returned value is less than 0.5-this will be demonstrated later on in the script.</p>
<h4 class="mume-header" id="random-decimal-number-generator">Random Decimal Number Generator</h4>

<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">/**
 * @function randomNumberDecimal Number
 * @returns Random Decimal number fixed to 4 decimal places. 
 */</span>
<span class="token keyword">function</span> <span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>Here we are ensuring that the return value is an integer(number) by using the ternary <code>+</code> symbol. You can try this in the console:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">&apos;10&apos;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// &apos;&apos;10&apos;&apos;</span>
<span class="token keyword">typeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//&quot;string&quot;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token operator">+</span>a
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// 10 </span>
<span class="token keyword">typeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//&quot;number&quot;</span>
</pre><p>Next  we fix the returned sum to four decimal places. Which is sufficiently long to be random and small enough that it wouldn&apos;t take up extra memory when computing.</p>
<h4 class="mume-header" id="convert-to-radians">Convert to Radians</h4>

<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">/**
 * @function convertRadians
 * @param {Number} degrees in Decimal
 * @returns Degrees in Radians
 */</span>
<span class="token keyword">function</span> <span class="token function">convertRadians</span><span class="token punctuation">(</span><span class="token parameter">degrees</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">+</span><span class="token punctuation">(</span>degrees <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>Javascript likes radians, as it turns out. <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>. This will save a lot of unnecessary complications when we start making the spaceship rotate clockwise and counter-clockwise.</p>
<h4 class="mume-header" id="working-out-the-distance-between-objects">Working out the Distance between Objects</h4>

<p>These two functions carry out a similar purpose to each other. The long and short of it is we will be working out the distance between two points using cartesian geometry.<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">/**
 * @function distanceBetweenPoints
 * @description
 * Takes the  distance between two points A(x,y) and B(x,y) 
 * 
 * @param {Number} x1 - X - Co-ordinate of the Primary Object
 * @param {Number} y1 - Y - Co-ordinate of the Primary Object
 * @param {Number} x2 - X - Co-ordinate of the Secondary Object
 * @param {Number} y2 - Y - Co-ordinate of the Secondary Object
 * @returns Distance in Pixels
 * 
 */</span>
<span class="token keyword">function</span> <span class="token function">distanceBetweenPoints</span><span class="token punctuation">(</span><span class="token parameter">x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x2 <span class="token operator">-</span> x1<span class="token punctuation">)</span><span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y2 <span class="token operator">-</span> y1<span class="token punctuation">)</span><span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>The next function takes the same principles and apply it to circles <sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>. Here we are taking the distance between two points and subtracting it of the sum of the radius of the two circles, using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil"><code>Math.ceil()</code></a> to return the number rounded up to the nearest whole number.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">/**
 * @function distanceBetweenCircles
 * @param {Number} x1 - X - Co-ordinate of the Primary Object
 * @param {Number} y1 - Y - Co-ordinate of the Primary Object
 * @param {Number} r2 - R - Co-ordinate of the radius of the Primary Object 
 * @param {Number} x2 - X - Co-ordinate of the Secondary Object
 * @param {Number} y2 - Y - Co-ordinate of the Secondary Object
 * @param {Number} r2 - R - Co-ordinate of the radius of the second Object 
 * @returns 
 * Returns the distance between two circles 
 */</span>   
<span class="token keyword">function</span> <span class="token function">distanceBetweenCircles</span><span class="token punctuation">(</span><span class="token parameter">x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>r1<span class="token punctuation">,</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">,</span>r2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x2 <span class="token operator">-</span> x1<span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y2<span class="token operator">-</span>y1<span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>r2<span class="token operator">+</span>r1<span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>Now that is the Global Scope populated with the few functions that we will be needing through in the script.</p>
<h2 class="mume-header" id="technical-considerations">Technical Considerations</h2>

<p>Lets quickly discuss some of the technical considerations that I had to take in order to create what I thought the game would look like.</p>
<p>In my head I wished for a game, a replica of the game that I played as kid. I wanted to remember that feeling of piloting a small spacecraft through the asteroid belt. Growing older does make the power of nostalgia stronger.</p>
<p>For this game, I was wanting a start screen, a highscores screen, a game screen and a few other things in between.</p>
<p>This leads us to undertake what is known as a Model-View-Controller design paradigm.<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup> The central tenants of this design pattern is that the model holds the components of the applications structures and patterns.</p>
<img src="https://hackernoon.com/images/zi133krl.jpg" alt="Image of a Model-View-Controller taken from Hackernoon: Writing a Simple MVC App in JavaScript">
<p>The Game Model is the data-structures that we will be using that is independent of the user interface. It manages and directs the data based on predefined logic and methods set by the models.</p>
<p>By this I mean that we would be using a model to hold reference to the game: its variables and methods.</p>
<p>We would also have a model for the ship and asteroids as these are independent data structures that would be controlled by their respective models.</p>
<p>The View is the visual representation of the data within the model. There can be multiple views supported from the main model, we will be using this to develop the game screens.</p>
<p>The controller which accepts the input from the user provides the interface to determine which game view would be used and manipulating the data sent to the model.</p>
<p>This design pattern fits within the scope of what we are trying to accomplish. In order to really achieve this MVC design we would be using a Object Orientate Approach to our game. Without really going far into the script we have in effect took a massive technical tangent to the original script.</p>
<p>At this point the original script from the Youtube tutorial was running kind of parallel to the direction I was undertaking however the similarities between our two scripts started to feel foreign too each other.</p>
<h2 class="mume-header" id="setting-up-the-game-models">Setting up the Game Models</h2>

<p>In order to follow the MVC design pattern and to keep with a strictly Object Orientated Approach <sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup> to making this Asteroids game, we need to create some parent models or classes for our objects.</p>
<p>The best way to approach this is by breaking up the objects that we will be having into common properties and what is exclusive to itself.</p>
<ol>
<li>We need to keep an object that acts like a single point of truth for a lot of the game variables that we would be using repetitively throughout the script. There would also be methods(functions) that would be solely specific to the game and not related to either the spaceship or asteroids. If anything they should be able to access this model for reference at any time.<br>
<a href="#class-gamemodel">see class GameModel</a>.</li>
<li>We need to have a shared object that would hold similar properties that would be between both the spaceship and the asteroids. From this we can then build out each object<br>
<a href="#class-basicobject">see class BasicObject</a></li>
<li>Building a object literal or model for the spaceship and asteroids respectively. Each would have methods that would be relevant solely to them. Keeping the methods of these objects separate.<br>
<a href="#class-shipobject">see class ShipObject</a><br>
<a href="#class-asteroidobject">see class AsteroidObject</a></li>
</ol>
<h3 class="mume-header" id="class-gamemodel">class GameModel</h3>

<p>First up we are going to create a parent class for all the game constants and variables that we would be using. The original tutorial has these <em>cluttering</em> the global scope which made it awfully cumbersome. By moving these to an object we would be making it easier to reference and manage these variables in the game.</p>
<p>First up we would need to get the width and height of the canvas and have this automatically update every time the window is resized. This keeps the canvas elements inside the canvas respective of the viewport as it changes sizes. By getting this out early doors we can work with a more pixel sharp and responsive canvas. Which is to the benefit of the greater good.</p>
<p>We would be using the <code>getter</code> accessor method <sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup> if you are unfamiliar with it, this is a great introduction.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">/**
        * @this this._width - Private width variable that would store the size of the window width
        */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_width <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * @this this._height - Private Height variable that would store the height of the window
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_height<span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">/**
         * Calls the getCanvasDimensions method
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCanvasDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Getting the Width and Height as soon as the Window loads</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;load&apos;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCanvasDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//As the window is resized we are getting the new Canvas Dimensions</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;resize&apos;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCanvasDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
       
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * @method getCanvasDimensions
     * @description Obtains the Width and Height of the canvas respective to the viewport and the device&apos;s own pixel density. This is to provide accurate values for rendering the elements ont he canvas
     */</span>
    <span class="token function">getCanvasDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Width is determined by the css value for the viewport width this is then respected by the device pixel ratio. This is then used to set the canvas.width value</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">&apos;width&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>devicePixelRatio<span class="token punctuation">)</span> <span class="token operator">*</span> devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Setting the canvas width </span>
        canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_width
        
        <span class="token comment">// height is determined by the css value for the viewport height this is then respected by the device pixel ratio. This is then used to set the canvas.height value</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">&apos;height&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>devicePixelRatio<span class="token punctuation">)</span> <span class="token operator">*</span> devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Setting the canvas height</span>
        canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_height
        
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * @this this.width - Returns the width of the canvas
     */</span>
    <span class="token keyword">get</span> <span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//This sets the width to the private _width value</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_width
        
    <span class="token punctuation">}</span>
      <span class="token comment">/**
     * @this this.height - Returns the height of the canvas
     */</span>
    <span class="token keyword">get</span> <span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//This sets the height to the private _height value</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_height
    <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p>There is a couple of things happening here that is worth commenting on. First we set internal <code>this</code> properties for the width and height. The purpose being is that these update as the window loads up, so it doesn&apos;t have a <code>null</code> value. We place a method call within the constructor function as we need to establish that the method call <code>getCanvasDimensions()</code> is invoked when it the object is created. Secondly we place event listeners again within the constructor to re-obtain the new width and height value as the window resizes.</p>
<p>We then use the <code>get</code> accessor function which lets us <em>get the new value</em> when it is called. This is all done in the name of responsiveness. We will see exactly how it looks soon once we start drawing the spaceship.</p>
<p>Next we are going to be instantiating this new object literal to something that we can now model, and that is what we are calling it.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">let</span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p><img src="assets/imgs/console-log-ReferenceObj.png" alt="Console Output of the Model"><br>
This looks right, now go ahead and resize the window and <code>console.log(model.width)</code> and <code>console.log(model.height)</code> respectively. Notice how it presents the new sizes as the window changes. (This was a huge win for me, three canvas projects later and I finally fix this bug! &#x1F4AA;)</p>
<p>As we begin to develop the game out we will be adding to this Object Class with additional properties.</p>
<p>Since we are using <code>requestAnimationFrame()</code> API we need to understand something about it. It is a magical recursive loop, that doesn&apos;t break your computer. But as it does its looping it does so at an inconsistent rate, this is often client-machine dependant. So in a single second, the recursive loop will go over itself anywhere between 50-100 times in a second. Each time it does it re-draws or re-executes the animation function. Each <em>scene</em> or <em>frame</em> is a snapshot of the programs recalculations in time.</p>
<p>To give a our animation Loop a form of consitistancy we set a property to indicate the number of frames to execute each second. This gives our animation a steady frame rate, of each frame being executed 1/60th of a second or 16.6ms. So that&apos;s one new frame every 16.6ms, which is easier for the calculations which we will be doing.</p>
<p>So in the <code>class GameModel</code> constructor function we add the following along with the other  properties.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">/**@this this.FPS - Frames per Second */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="class-basicobject">class BasicObject</h3>

<p>This is a shared parent object literal class that would contain the most basic shared properties between the spaceship and the asteroids. This is straight forward:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">BasicObject</span><span class="token punctuation">{</span>
    <span class="token comment">/**
     * 
     * @param {Number} x - Position of Object on X - Axis 
     * @param {Number} y - Position of Object on Y - Axis
     * @param {Number} r - Radius of the Object
     * @param {Number} a - Angle of the Object (in deg)
     */</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">/**
         * @this this.x -  Position of the Object on the X - Axis
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * @this this.y -  Position of the Object on the Y - Axis
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * @this this.r -  Radius of the Object
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * @this this.a - Angle of the Object - converted to Radians
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token function">convertRadians</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Converted to Radians</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Really this would save us repeating these properties as we create the spaceship and the asteroids.</p>
<h3 class="mume-header" id="class-shipobject">class ShipObject</h3>

<p>Right now lets do something fun.  For this class we will be building up over time. We will be adding new properties to it as we make the ship more complex.</p>
<p>We will be looking to make the following spaceship.<br>
<img src="./assets/imgs/Spaceship_example.png">.</p>
<p>To do this lets first extend the <code>BasicObject</code> class to start incorporating some of the properties that we need for building our spaceship.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span> <span class="token keyword">extends</span> <span class="token class-name">BasicObject</span><span class="token punctuation">{</span>
     <span class="token comment">/**
     * @constructor
     * @param {Number} x - Position of Object on X - Axis 
     * @param {Number} y - Position of Object on Y - Axis
     * @param {Number} r - Radius of the Object
     * @param {Number} a - Angle of the Object (in deg)
     * @param {Number} rot - 360/deg of turning
     * @param {Boolean} thrusting - Flag- Registers if the ship is thrusting is active
     * @param {Object} thrust - Object contains the thrust vectors for the Ship
     */</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>a<span class="token punctuation">,</span>rot<span class="token punctuation">,</span>thrusting<span class="token punctuation">,</span>thrust</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token comment">//Inheriting the Properties from the Parent Object</span>
     
        <span class="token comment">/**
         * @this this.rot - Ship can only rotate around 360deg of a circle  converted to Radians
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token function">convertRadians</span><span class="token punctuation">(</span>rot<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Converted it into Radians</span>
     
        <span class="token comment">/**
         * @this this.thrusting - Boolean Flag! True when the ship trust is active
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>thrusting <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>thrusting<span class="token punctuation">)</span><span class="token punctuation">;</span>
     
        <span class="token comment">/** 
         * @this this.thrust - Provides an object of vectors for the ship when travelling
        */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>thrust <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>thrust<span class="token punctuation">}</span><span class="token punctuation">;</span>
     
        <span class="token comment">/**
         * @this this.SHIP_SIZE 
         * Height of the Ship in px&apos;s - Same as the Radius
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_SIZE</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
     
        <span class="token comment">/**
         * @this this.Friction 
         * Adds a Friction co-efficient to the movement of the ship:Friction in Space (0 = no friction, 1 = 100% friction)
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">FRICTION</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        
        <span class="token comment">/**
         * @this this.SHIP_THRUST 
         * Acceleration of the Ship, in px/sec^2
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_THRUST</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// acceleration of the Ship, px/sec^2</span>
     
        <span class="token comment">/**
         * @this this.TURN_DEG
         * This is the turning angle in deg/sec. 
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">TURN_DEG</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Turns in deg/sec</span>


    <span class="token punctuation">}</span>
    <span class="token comment">//Methods Go Here</span>
<span class="token punctuation">}</span>
</pre><p>Quick note: I have kept the <strong>constants</strong> that the ship would be using like typed in Upper-case, which is just to make it easier to know what is a variable and a constant.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_SIZE</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">FRICTION</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_THRUST</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">TURN_DEG</span>
</pre><p>To instantiate the object we will be calling it using:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">//On the Global scope for the time being</span>
<span class="token keyword">let</span> spaceship <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShipObject</span><span class="token punctuation">(</span>
    model<span class="token punctuation">.</span>width <span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
    model<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token number">90</span><span class="token punctuation">,</span>
    <span class="token number">360</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>This should produce the following when <code>console.log(ship)</code> (x &amp; y values will be somewhat different)-(it was originally called <code>ship</code>&#x1F6A2;, this got changed to <code>spaceship</code>&#x1F680;)<br>
<img src="assets/imgs/console.log(ship).png" alt="snapshot of the console output for the spaceship"></p>
<p>Awesome, we have gotten our spaceship object made up with little to no complications what-so-ever. &#x1F611;</p>
<h4 class="mume-header" id="draw-method">Draw method</h4>

<p>Now lets get the spaceship on the screen. First we would want to create a draw method on the ShipObject&apos;s prototype chain.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">//ctx styles</span>
       ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&apos;white&apos;</span>
       ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
       <span class="token comment">//The outer Triangle</span>
       ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>
           <span class="token comment">//Nose of the spaceship</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> <span class="token comment">// rear left</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> <span class="token comment">// rear right</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Finishes of the Outer Triangle</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Drawing the Cockpit</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;red&apos;</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span> <span class="token comment">// top of the cockpit</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_SIZE</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_SIZE</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> <span class="token comment">// rear left of the cockpit</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">+</span>  <span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> <span class="token comment">// rear right of the cockpit</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">-</span>  <span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Fill in the Shape</span>
        ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Finishes of the Triangle</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//More to be added....</span>
    <span class="token punctuation">}</span>

</pre><p>Now to have the ship drawn on the screen we would invoke this method within the <a href="#setting-up-the-animation-loop">gameAnimationLoop</a> Loop.</p>
<p>Here we are instructing the <code>ctx</code> render engine to render three white lines for the outer triangle of the spaceship. <code>ctx.moveTo(x,y)</code> takes the x and Y locations of the spaceship and then takes a position a third of itself above its location as the nose or the tip of the ship, from here we create a <code>ctx.lineTo(x,y)</code> which then instructs it to draw a line to the rear left, then a line to the rear right. This is then closed off by the <code>ctx.closePath()</code>. With the inner cockpit we are reducing the size of the triangle and positioning it within the center of the ship. We are also instructing it to be filled in a <code>red</code> colour.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">//Game Animation Loop</span>
<span class="token keyword">function</span> <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;black&apos;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Drawing the &#x1F680;</span>
    spaceship<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



    <span class="token comment">//Request animation frame</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>gameAnimationLoop<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p>You should have an object now appear on the canvas that should look very similar to this image of the spaceship.<br>
<img src="assets/imgs/Spaceship_example.png" alt="image of the spaceship"><br>
&#x1F44D;</p>
<h4 class="mume-header" id="making-the-ship-move">Making the ship move</h4>

<p>Now we want to make the ship move about. If you noticed we created a <code>thrusting</code> flag, which just records if the ship&apos;s thrust is On or Off. We can use these flags to determine when to switch a feature on and off. in this case we would using it to instruct the model to update when the ship the thrust is active, which would be seen as:<br>
<img src="assets/imgs/Spaceship_example-thrusting.png" alt="Example of the spaceship trusting"><br>
We would also need to rotate the ship clockwise and counter-clockwise. This would be controlled by keyboard inputs which we would make up second.<br>
<img src="assets/imgs/Spaceship_example-thrusting.png"></p>
<p><img src="assets/imgs/Spaceship_example-rotating.png"><br>
But first lets make the functionality for the spaceship to fly around space.<br>
Back in the <code>draw()</code> method we will add this block of code:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span> 
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>thrusting<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Add Thrust vector </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_THRUST</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">**</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_THRUST</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">**</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span> <span class="token punctuation">;</span>
            <span class="token comment">//Draw thrust animation</span>
            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span>
            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span> <span class="token comment">// rear center behind the spaceship</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> <span class="token comment">// rear left</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">+</span>  <span class="token number">0.75</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.75</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> <span class="token comment">// rear right</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">-</span>  <span class="token number">0.75</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.75</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Fill in the Shape</span>
            ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Finishes of the Triangle</span>
            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//Applying Friction to slow down the spaceship when Not thrusting</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>thrusting<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">FRICTION</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>x <span class="token operator">/</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">FRICTION</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>y <span class="token operator">/</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span>
            
        <span class="token punctuation">}</span>

        <span class="token comment">//Rotate spaceship</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rot

        <span class="token comment">//Move the spaceship</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>thrust<span class="token punctuation">.</span>y<span class="token punctuation">;</span>

        <span class="token comment">//Handle screen edges</span>
</pre><p>Now lets get the event listeners setup. For the present we will be applying this logic currently to the <code>GameModel</code> In the <code>GameModel</code> literal we will create two methods, one to handle the key-down press event and one as we release the key or the key-up press event. As we press down we will active the thrust and rotate the ship, and as we release we want to stop the thruster and rotation, else they would just continue to be on.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">keyDown</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowUp&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;w&apos;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Start Thrusting</span>
            spaceship<span class="token punctuation">.</span>thrusting <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowRight&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;d&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Rotate Right</span>
        spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token operator">-</span><span class="token function">convertRadians</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span><span class="token constant">TURN_DEG</span><span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowLeft&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;a&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Rotate Left</span>
        spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token function">convertRadians</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span><span class="token constant">TURN_DEG</span><span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span>
        
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    <span class="token function">keyUp</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowUp&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;w&apos;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Stop Thrusting</span>
            spaceship<span class="token punctuation">.</span>thrusting <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowRight&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;d&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Stop Rotating</span>
            spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowLeft&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;a&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Stop Rotating</span>
            spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</pre><p>To add these event listeners we do so just above the <code>gameAnimationLoop</code> loop at the bottom of the script.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;keydown&apos;</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>keyDown<span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;keyup&apos;</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>keyUp<span class="token punctuation">)</span>
</pre><p>Now you should have your spaceship moving and zooming about that screen &#x1F60A;.</p>
<h4 class="mume-header" id="handle-screen-edges">Handle screen edges</h4>

<p>But we have a problem as the ship moves off the screen it doesn&apos;t appear on the opposite side of where it exited. This is a problem that can be fixed by adding a method on the <code>GameModel</code> Object that would handle for screen edges.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">screenEdges</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">-</span> obj<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
            obj<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> obj<span class="token punctuation">.</span>r
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> obj<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
            obj<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> obj<span class="token punctuation">.</span>r
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">-</span> obj<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
            obj<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> obj<span class="token punctuation">.</span>r
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> obj<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
            obj<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> obj<span class="token punctuation">.</span>r
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>  
</pre><p>Here we will be passing in different objects like the spaceship and asteroids and as such we will be calling on this function a lot. All we are doing is taking in the x and y position of the object and reversing them depending on what side they exit.</p>
<p>Back in the <code>draw()</code> method we have setup we will apply this statement at the bottom</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">        <span class="token comment">//Handle screen edges</span>
        model<span class="token punctuation">.</span><span class="token function">screenEdges</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

</pre><p>Now you the spaceship should reappear on the opposite side of where it entered. Now we are flying &#x1F680;.</p>
<p>The spaceship object is pretty complete for now, we will come back and add other functionality like; lasers and collision detection etc.</p>
<h3 class="mume-header" id="class-asteroidobject">class AsteroidObject</h3>

<p>Now to the namesake of the game.  Firstly we need to create an asteroid field, where each asteroid would randomly appear on the screen and have their own respective vectors which lets them follow a path across each frame. They also should be able to collide with each other and ricochet of each other. We would also need to be able to destroy them completely and replace them with smaller fragments.</p>
<p>But before we do anything that remotely complicated, we need to create our Asteroid Object literal. This model will describe the properties that we would be using for each asteroid.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">AsteroidObject</span> <span class="token keyword">extends</span> <span class="token class-name">BasicObject</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>asteroidIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">)</span>
        <span class="token comment">/**@this this.a - returns a random angle in radians */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span>
        
        <span class="token comment">/**@this this.vX - random Velocity on the x-axis  */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vX <span class="token operator">=</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token operator">/</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token number">0.5</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        
        <span class="token comment">/**@this this.vY - random Velocity on the y-axis  */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vY <span class="token operator">=</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token operator">/</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token number">0.5</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        
        <span class="token comment">/**@this this.vertices - Random number of vertices for the polygon to be generated */</span>
        
        <span class="token keyword">this</span><span class="token punctuation">.</span>vertices <span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//Each asteroid has a random number of vertices</span>
        
        <span class="token comment">/**@this this.jaggedness - random determination on the amount of jaggedness on the asteroid */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>jaggedness <span class="token operator">=</span> <span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 0 = none 1 = 100</span>
        
        <span class="token comment">/**@this this.offsets - Array of positions for the dimensions of the polygon */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>offsets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        
        <span class="token comment">/**@this this.asteroidIndex - Asteroid Index position in the Array */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidIndex <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>asteroidIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Here we are going to be setting the asteroid x,y and radius separately, this way we can give them random values at run-time. We will come back to this. Next we are setting the <code>vX</code> &amp; <code>vY</code> using a random number that would depending on the logic condition would either appear to be a positive integer or a negative integer travelling left to right or vice-versa. You may notice that I have an <code>astroIndex</code> which doesn&apos;t get used anywhere in the script. I  had introduced this to help with a few debugging issues where I had to label each asteroid to study their behaviour for a time. You can choose to ignore this entirely, but please be cautious of the changes made as you proceed.</p>
<p>Because we are wanting a variety of different asteroids where some are going to be jaggy and sharp and others to be smoother random polygons we need to have a few extra variables to hold such patterns.</p>
<h4 class="mume-header" id="creating-asteroid-field">Creating Asteroid Field</h4>

<p>Now lets create an asteroid field. Since this is a feature of the game, we would be placing this next method on the <code>GameModel</code> prototype chain.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token comment">//Methods</span>
    <span class="token function">createAsteroidField</span><span class="token punctuation">(</span><span class="token parameter">numberOfAsteroids</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token comment">//clear the existing array</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//creating place holders</span>
        <span class="token keyword">let</span> x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index<span class="token operator">&lt;</span> numberOfAsteroids<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            x <span class="token operator">=</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span>
            y <span class="token operator">=</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">)</span>
            r <span class="token operator">=</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//Giving the asteroid a Label - Done purely for debugging purposes</span>
            i <span class="token operator">=</span> index

            <span class="token comment">//Creating a buffer zone around the ship to prevent the asteroids randomly spawning on the ship</span>
    
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">distanceBetweenPoints</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span>x<span class="token punctuation">,</span>spaceship<span class="token punctuation">.</span>y<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> spaceship<span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> spaceship<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
                x <span class="token operator">=</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span>x <span class="token operator">+</span> spaceship<span class="token punctuation">.</span>r <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                y <span class="token operator">=</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span>y <span class="token operator">+</span> spaceship<span class="token punctuation">.</span>r <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createNewAsteroid</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField
    <span class="token punctuation">}</span>

    <span class="token function">createNewAsteroid</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>asteroidIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> asteroid <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AsteroidObject</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>asteroidIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Setting the values for the asteroids jaggedness</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> offset <span class="token operator">&lt;</span> asteroid<span class="token punctuation">.</span>vertices<span class="token punctuation">;</span> offset<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            asteroid<span class="token punctuation">.</span>offsets<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
               Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> asteroid<span class="token punctuation">.</span>jaggedness <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> asteroid<span class="token punctuation">.</span>jaggedness
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> asteroid
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>These method will create a number of asteroids from a parameter which we can change throughout the script.  This will come in handy when we want to create more asteroids.<br>
We are also creating a buffer zone around the ship where if the asteroid spawns near a radial distance to the ship, it would be relocated to somewhere else in space and kept a distance away.<br>
We then push each newly created asteroid object to the <code>asteroidField</code> which is an array of asteroid objects.<br>
To call this method we place it for the time being on the global scope.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">//placed ideally just above the Animation Loop</span>
model<span class="token punctuation">.</span><span class="token function">createAsteroidField</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</pre><h4 class="mume-header" id="draw-method-1">Draw Method</h4>

<p>The asteroids themselves each has their own draw method. This method is on the <code>AsteroidObject</code> prototype chain. Here we are instructing it to draw a polygon based on the values in the <code>asteroid.offset</code> array. This gives each asteroid their own unique shape. Reminiscent of the uniqueness of snowflakes.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">AsteroidObject</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Draw Asteroids</span>
            ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&apos;#BADA55&apos;</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;transparent&apos;</span><span class="token punctuation">;</span>
            <span class="token comment">//draw a path</span>
            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            <span class="token comment">//draw the polygon and jaggedness for each asteroid</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> polygon <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> polygon <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertices<span class="token punctuation">;</span> polygon<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsets<span class="token punctuation">[</span>polygon<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">*</span>  Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> polygon <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertices<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsets<span class="token punctuation">[</span>polygon<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token operator">*</span>  Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> polygon <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertices<span class="token punctuation">)</span>
                    <span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//handle collision detection</span>
            
            <span class="token comment">//move asteroid</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vX
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vY
            
            
            <span class="token comment">//handle edge of screen</span>
            model<span class="token punctuation">.</span><span class="token function">screenEdges</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

</pre><p>To call this function in the Animation Loop we will add the following <code>Array.forEach()</code> loop.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">//Global Scope-At the Bottom of the Script</span>
<span class="token keyword">function</span> <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;black&apos;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

    spaceship<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Drawing each asteroid on the screen</span>
    model<span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">asteroid</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        asteroid<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>


    <span class="token comment">//Request animation frame</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>gameAnimationLoop<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</pre><p>Now you should have a set of randomly assorted asteroids, all floating about the screen &#x1F60D;</p>
<img src="assets/imgs/asteroid-example-finalRender.png" alt>
<p>Now we can start building a game.</p>
<h2 class="mume-header" id="building-out-the-game">Building out the Game</h2>

<p>Here we are going to be adding more functionality to the game, these are things that I thought: &apos;that would be cool to have.&apos;</p>
<p>And so this project has naturally grown arms and legs of its own.</p>
<p>The things we would be adding to this would be:</p>
<ol>
<li>
<p>collision detection between:</p>
<ul>
<li>ship and asteroid: where the ship is blown up. We would have an exploding animation. It should decrease the game lives counter by one.<br>
-asteroid and asteroid: where each asteroid if it collides with another it should ricochet off each other and go in different directions.</li>
</ul>
</li>
<li>
<p>Lasers</p>
<ul>
<li>shooting and blowing up each asteroid into smaller pieces. Keeping a score as each asteroid is breaking up. If the pieces break into smaller fragments, once they reach a certain size they disappear.</li>
</ul>
</li>
<li>
<p>Keep a score and a Lives counter. Game ends when the player runs out of lives. Levels increase if the player is still alive and their is no more asteroids left.</p>
</li>
</ol>
<p>(Ill add more here as we go, something about it growing arms and legs)</p>
<h3 class="mume-header" id="collision-detection">Collision Detection</h3>

<p>Remember the <a href="#working-out-the-distance-between-objects"><code>distanceBetweenPoints()</code></a> and <a href="#working-out-the-distance-between-objects"><code>distanceBetweenCircles()</code></a> that we created in the global space. This is where we would start to utilize these functions.</p>
<h4 class="mume-header" id="asteroid">Asteroid</h4>

<p>To see if a collision has happened we are checking if the distance between two asteroids is less than the radius of the asteroid about to collide. If it does we will change the vector values for both the asteroids in question.<br>
In the <code>AsteroidObject</code> methods chain we will add this code block that pretty much does that with little <em>Jank</em>.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">AsteroidObject</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">asteroid2asteroidCollision</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> currentAsteroid <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">otherAsteroid</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>currentAsteroid <span class="token operator">!=</span> otherAsteroid<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">distanceBetweenCircles</span><span class="token punctuation">(</span>currentAsteroid<span class="token punctuation">.</span>x<span class="token punctuation">,</span>currentAsteroid<span class="token punctuation">.</span>y<span class="token punctuation">,</span>currentAsteroid<span class="token punctuation">.</span>r<span class="token punctuation">,</span>otherAsteroid<span class="token punctuation">.</span>x<span class="token punctuation">,</span>otherAsteroid<span class="token punctuation">.</span>y<span class="token punctuation">,</span>otherAsteroid<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">&lt;</span> currentAsteroid<span class="token punctuation">.</span>r <span class="token operator">+</span> currentAsteroid<span class="token punctuation">.</span>x <span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//Make the asteroids &apos;softly&apos; ricochet off each other</span>
                    <span class="token comment">//There has been many different attempts at getting this right, this is by far the best attempt at getting the asteroids to move off and change direction and their velocity that produces the least amount of Janking</span>
                        
                        currentAsteroid<span class="token punctuation">.</span>vX <span class="token operator">=</span> currentAsteroid<span class="token punctuation">.</span>vX<span class="token operator">/</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token operator">-</span>currentAsteroid<span class="token punctuation">.</span>a<span class="token punctuation">)</span> 
                        otherAsteroid<span class="token punctuation">.</span>vX <span class="token operator">=</span> otherAsteroid<span class="token punctuation">.</span>vX<span class="token operator">/</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token operator">-</span>otherAsteroid<span class="token punctuation">.</span>a<span class="token punctuation">)</span> 

                        currentAsteroid<span class="token punctuation">.</span>vY <span class="token operator">=</span> currentAsteroid<span class="token punctuation">.</span>vY<span class="token operator">/</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token operator">-</span>currentAsteroid<span class="token punctuation">.</span>a<span class="token punctuation">)</span>  
                        otherAsteroid<span class="token punctuation">.</span>vY <span class="token operator">=</span> otherAsteroid<span class="token punctuation">.</span>vY<span class="token operator">/</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token operator">-</span>otherAsteroid<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
                    <span class="token comment">//This was easy...&#x1F611;</span>

                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</pre><p>We are using the <code>forEach()</code> array iterator to check if the asteroid that is currently being drawn in that frame is not the same as every other asteroid.<br>
We then check if the distance between the asteroids is less than the asteroid radius that is colliding with it , meaning that they are overlapping at the radial point of each asteroid. We are then changing the velocity of both asteroids respective of the framerate and their angles.</p>
<p>To instantiate this method every time the asteroid is drawn we place it within the <code>AsteroidObject.draw()</code> method.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">AsteroidObject</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span> 
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       
       <span class="token comment">//Handle collision Detection</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">asteroid2asteroidCollision</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">asteroid2shipCollision</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    

        <span class="token comment">//move asteroid</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vX
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vY
        
        <span class="token comment">//handle edge of screen</span>
        model<span class="token punctuation">.</span><span class="token function">screenEdges</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</pre><p>To really test this new method it would be good to increase the number of asteroids in the asteroid field to something like 15 just to fill up the screen, in all honesty you can play with this value as much as you wish<br>
<code>model.createAsteroidField(15)</code></p>
<h4 class="mume-header" id="ship">Ship</h4>

<p>To detect if the Ship has collided with an asteroid we will need to register a <code>spaceship.exploding</code> flag as true. For if the ship is exploding we would want to draw an explosion animation. Then reset the ship&apos;s position to the center of the screen. (and reduce the lives&apos;s count by one...)</p>
<p>To detect the asteroid 2 ship collision we would apply this method to the <code>AsteroidObject</code> chain.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">AsteroidObject</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">//methods</span>
    <span class="token function">asteroid2shipCollision</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">distanceBetweenPoints</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span>spaceship<span class="token punctuation">.</span>x<span class="token punctuation">,</span>spaceship<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> spaceship<span class="token punctuation">.</span>r <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>spaceship<span class="token punctuation">.</span>immune<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// register that the ship is exploding </span>
            model<span class="token punctuation">.</span>shipExploding <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>There is a few extra properties that had to be set to set this up. First in the <code>GameModel</code> Object literal we put this flag in.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">/**@this this.shipExploding - Registers a flag if the ship is exploding */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>shipExploding <span class="token operator">=</span> <span class="token boolean">false</span>
</pre><pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token comment">//constructor</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">/**@this this.immune - Immunity from Explosions Flag */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>immune <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//methods </span>
    <span class="token function">explodeShip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Prevent the ship from moving</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>immune<span class="token punctuation">)</span><span class="token punctuation">{</span> 
           <span class="token keyword">this</span><span class="token punctuation">.</span>thrust <span class="token operator">=</span> <span class="token punctuation">{</span>
            x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
            y<span class="token punctuation">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>

        <span class="token comment">//Drawing the Explosion</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Outermost circle - Dark Orange</span>
        ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&apos;#db4200&apos;</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span><span class="token string">&apos;#db4200&apos;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// n-2 circle - Orange</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&apos;#f26900&apos;</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span><span class="token string">&apos;#f26900&apos;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// n-1 circle - Yellow</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&apos;#f29d00&apos;</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span><span class="token string">&apos;#f29d00&apos;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</pre><p>This is the exploding animation function. We are basically instructing the <code>ctx</code> render engine to create three concentric circles to give the appearance of an explosion. Now we are going to set this to be active if the ship is registered as being <em>exploding</em><br>
Once it explodes after a certain time limit we want it to re-spawn at the center of the screen.</p>
<p>(Also I would ideally like it to decrease a live but that is still proving tricky, mind you something could be said about the power of procrastination, if it wasn&apos;t for this singular issue, other problems wouldn&apos;t of managed to of been resolved, like the janking collisions between asteroids I mean it was ugly for a while. And the resizing the screen, I cant tell you how chuffed I am still at this. So I still hold out hope yet, that by the time we get to that, I&apos;ve of figured it out by then &#x1F64A;...The climb to the summit is indeed a perilous one. )</p>
<p>Once the spaceship explodes we want to give it some sort of immunity from being destroyed for a period of time to let the user get somewhere safe before they are susceptible to being destroyed by an asteroid.</p>
<p>So lets add a change to the spaceship, If it is immune it turns golden &gt;?</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//At the top</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>immune<span class="token punctuation">)</span><span class="token punctuation">{</span>
                ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;gold&quot;</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;gold&quot;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//Delete line 390</span>
        <span class="token operator">...</span>
        <span class="token comment">//Drawing the Cockpit</span>
            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ctx.fillStyle = &apos;red&apos;;&lt;---Delete this line</span>
    <span class="token punctuation">}</span>
</pre><p>This method is placed on the <code>GameModel</code> methods chain,</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">createNewSpaceShip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Delete the existing spaceship &#x1F680;&#x1F480;</span>
            spaceship <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span>
        <span class="token comment">//Instantiating a new spaceship &#x1F386;&#x1F680;</span>
        <span class="token keyword">let</span> newSpaceship <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShipObject</span><span class="token punctuation">(</span>
            model<span class="token punctuation">.</span>width <span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
            model<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token number">30</span><span class="token punctuation">,</span>
            <span class="token number">90</span><span class="token punctuation">,</span>
            <span class="token number">360</span><span class="token punctuation">,</span>
            <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
         <span class="token comment">//Making the New Ship immune to Being Exploded</span>
         newSpaceship<span class="token punctuation">.</span>immune <span class="token operator">=</span> <span class="token boolean">true</span>
         <span class="token comment">//Switch off the Exploding Flag</span>
         model<span class="token punctuation">.</span>shipExploding <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token comment">//This just makes sure we can move afterwards</span>
         newSpaceship<span class="token punctuation">.</span>thrusting <span class="token operator">=</span><span class="token boolean">false</span>
         <span class="token keyword">return</span> spaceship <span class="token operator">=</span> newSpaceship<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Okay everything should be set now to make it work. In the animation loop we write the following</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">function</span> <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>model<span class="token punctuation">.</span>shipExploding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            spaceship<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            spaceship<span class="token punctuation">.</span><span class="token function">explodeShip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//Timeout&apos;s to carry out these functions after a certain period of time.        </span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>createNewSpaceShip<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">//Removing the ships immunity after 5 sec</span>
                spaceship<span class="token punctuation">.</span>immune <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span> 
</pre><p>Using <code>setTimeout()</code> macro-promise we can do some time-delayed actions like, setting the explosion to last for 1 second, and then create a new spaceship. Once that promise is carried out we then look to remove the immunity from the ship after a period of 5 seconds...</p>
<p>Hopefully all those flags we set work and you should have something that goes like this:</p>
<figure>
  <video controls="true" allowfullscreen="true" width="500" height="300">
    <source src="./assets/video/asteroidswhatitshouldlooklikesofar.mp4" type="video/mp4">
        <p>Sorry but the video doesn&apos;t seem to be working...Ill have it loaded up somewhere and hopefully working at some point.</p>
    </video>
</figure>
<h3 class="mume-header" id="lasers-shooting-and-blowing-things-up">Lasers - shooting and blowing things up</h3>

<p>We discussed when building out the game, what we would like from it. As awesome as it is, flying the spaceship across the screen and watching all that hard work come together. Lets make it do what the original game was famed at doing and that was blowing up asteroids into even smaller asteroids and racking up high scores.</p>
<h4 class="mume-header" id="shooting-the-lasers">Shooting the Lasers</h4>

<p>Lets begin by making the lasers. First lets add some properties to the <code>ShipObject</code> These will be for storing the lasers as objects as they are fired in an array. A flag is used to register the firing of lasers, and a distance they will travel that is respective of the screen width.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Add these properties:</span>
       <span class="token comment">/**@this this.laserStatus - Flag - Registers if the laser is actively shooting ON or OFF  */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>laserStatus <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**@this this.laserArray - Array Element that would store each laser object as they are fired */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**@this this.laserDistance - Distance the Laser would travel in respects to the screen width; 0 &lt; laserDistance &lt; 1(width) */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>laserDistance <span class="token operator">=</span> <span class="token number">0.5</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Next we are going to create a <code>drawLaser()</code> method on the <code>ShipObject</code> chain.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">drawLaser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Applying the lasers</span>
        <span class="token comment">//Looping backwards through the laser array</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> laserIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">;</span> laserIndex <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> laserIndex<span class="token operator">--</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Calculate the distance travelled</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">[</span>laserIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>distanceTravelled <span class="token operator">+=</span> 
                Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">[</span>laserIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>vX<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">[</span>laserIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>vY<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">[</span>laserIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>distanceTravelled <span class="token operator">&gt;</span> 
                    <span class="token keyword">this</span><span class="token punctuation">.</span>laserDistance <span class="token operator">*</span> model<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>laserIndex<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
                     <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">laser</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//Draw each laser</span>

            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span>
            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>laser<span class="token punctuation">.</span>x<span class="token punctuation">,</span>laser<span class="token punctuation">.</span>y<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">SHIP_SIZE</span><span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//move the laser</span>
            laser<span class="token punctuation">.</span>x <span class="token operator">+=</span> laser<span class="token punctuation">.</span>vX
            laser<span class="token punctuation">.</span>y <span class="token operator">+=</span> laser<span class="token punctuation">.</span>vY

            <span class="token comment">//Handling the edge of screen adjustments for the laser</span>
            <span class="token comment">//Slightly different to the screenEdges method</span>
            
            <span class="token keyword">if</span><span class="token punctuation">(</span>laser<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                laser<span class="token punctuation">.</span>x <span class="token operator">=</span> model<span class="token punctuation">.</span>width
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>laser<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> model<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">{</span>
                laser<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>laser<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                laser<span class="token punctuation">.</span>y <span class="token operator">=</span> model<span class="token punctuation">.</span>height
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>laser<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> model<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">{</span>
                laser<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token punctuation">}</span>
           
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//Asteroid 2 Laser Collision Detection</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>That is the method to draw the lasers, a few things to note in here, Firstly we are looping backwards through the array. <sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup>. This is so the last laser that is fired appears last and the other lasers that are fired are moving in sequence to the order in which they were fired. This loop allows us to efficiently work out the distance that each laser travels and allows us to remove them after finding out the distance that the laser objects in the array is less than half of the screen width. If they exceed the distance then we remove them from the array.</p>
<p>By doing this backwards for loop we can make sure the lasers are being drawn in the order that they are fired.</p>
<p>To draw them, we would instruct it to do so in the <code>ShipObject.draw()</code> method.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">//Laser </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawLasers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">//Rotate spaceship</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>So far so good, now we need to come up with a method that would let us fire off the lasers, basically every time the space-bar is hit it would create a laserObject ( you could forgive me but we can effectively ignore creating this from it&apos;s own Class Object-reason being that this object only contains properties that we are setting at run-time, there is nothing extra special about them, for they contain no methods or inheritance from another object).<br>
This laser object would be pushed to the laser array, where it would be removed after it has either travelled a certain distance proportionate to the half the width of the viewport.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">shootLasers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">/**@var LASER_SPEED - Speed of the Laser in px/sec*/</span>
        <span class="token keyword">const</span> <span class="token constant">LASER_SPEED</span> <span class="token operator">=</span> <span class="token number">500</span> 
        <span class="token comment">/**@var LASER_MAX - Maximum number of laser objects that can be created */</span>
        <span class="token keyword">const</span> <span class="token constant">LASER_MAX</span> <span class="token operator">=</span> <span class="token number">100</span> 
        <span class="token comment">//create the laser object if it meets these conditions</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>laserStatus <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token constant">LASER_MAX</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token comment">//Creating a laser object </span>
                <span class="token comment">//Shooting from the nose of the ship;</span>
                x<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
                y<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">//Applying the velocity</span>
                vX<span class="token punctuation">:</span> <span class="token constant">LASER_SPEED</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span><span class="token punctuation">,</span>
                vY<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token constant">LASER_SPEED</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span><span class="token punctuation">,</span>
                distanceTravelled<span class="token punctuation">:</span><span class="token number">0</span><span class="token comment">//Tracks the distance of the laser travelling</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
           
        <span class="token punctuation">}</span>
        <span class="token comment">//Last laser in the Array</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token constant">LASER_MAX</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token comment">//Fire one last laser object </span>
                x<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
                y<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
                vX<span class="token punctuation">:</span> <span class="token constant">LASER_SPEED</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span><span class="token punctuation">,</span>
                vY<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token constant">LASER_SPEED</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span><span class="token punctuation">,</span>
                distanceTravelled<span class="token punctuation">:</span><span class="token number">0</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token comment">//Resetting the array </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Lastly we are registering this to be activated once the space-bar event is occurring. In the <code>GameModel.keyDown(event)</code> method we will add this:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">keyDown</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos; &apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;Spacebar&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//shoot laser</span>
            spaceship<span class="token punctuation">.</span><span class="token function">shootLasers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Now you should have a spaceship that can fly about space, in between asteroids that if they touch the ship it will do a small explosion and then re-spawn in the center of the screen. We then confer it some immunity and now we can fire small red balls as lasers towards these asteroids.</p>
<p>So far, still good?....</p>
<p>Next we will want our lasers to interact with the asteroids, destroying them and breaking  up the asteroid into smaller components.</p>
<h4 class="mume-header" id="blowing-up-the-asteroids">Blowing up the Asteroids</h4>

<p>We place the following loops to the <code>shootLasers()</code> method to detect if a laser has indeed &apos;collided&apos; with the circumference of of each asteroid. It is a lot more difficult to place int eh lines of the polygon as the bounds for the detection, It would of required a really expensive loop that would of hindered the playability of the game.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">shootLasers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
       <span class="token comment">//Asteroid 2 Laser Collision Detection</span>
        model<span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">asteroid<span class="token punctuation">,</span>asteroidIndex</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">laser<span class="token punctuation">,</span>laserIndex</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">distanceBetweenPoints</span><span class="token punctuation">(</span>laser<span class="token punctuation">.</span>x<span class="token punctuation">,</span>laser<span class="token punctuation">.</span>y<span class="token punctuation">,</span>asteroid<span class="token punctuation">.</span>x<span class="token punctuation">,</span>asteroid<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> asteroid<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
                
                    <span class="token comment">//destroy asteroid</span>
                    model<span class="token punctuation">.</span><span class="token function">destroyAsteroid</span><span class="token punctuation">(</span>asteroidIndex<span class="token punctuation">)</span>
                    <span class="token comment">//remove the laser</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>laserArray<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>laserIndex<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Here we are using two <code>forEach()</code> loops nested within each other. This is so we can check the each asteroid in the field whether they are interacting with any of the lasers objects in the laser array.</p>
<p>Note that we have a method on the <code>model</code> chain called <code>destroyAsteroid(astroIndex)</code> this method is setup to break up the asteroids into smaller parts if the laser hits the center of the asteroid. It would break up into smaller parts until they reach a minimum size after which they would be removed from the asteroid Field.<br>
We also are instructing the laser to be removed from the array when it interacts with the asteroid, by using the <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/splice"><code>Array.splice()</code></a> method.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">destroyAsteroid</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// let asteroidCopy = asteroidsArray[index]</span>
        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
        <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">;</span>
    
        <span class="token comment">//split the larger asteroid into two when shot at</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span> r <span class="token operator">&gt;</span><span class="token number">50</span> <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token comment">//Adding the size of the asteroid as the value to be added to the score</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">+=</span> <span class="token number">20</span>
           <span class="token comment">//Remove the asteroid that is shot at</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
           <span class="token comment">//Create the smaller asteroid debris </span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createNewAsteroid</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createNewAsteroid</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>index <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> r <span class="token operator">&gt;</span><span class="token number">25</span>  <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Adding the size as the asteroid as the value to be added to the score</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">+=</span> <span class="token number">50</span>
            <span class="token comment">//Remove the asteroid that is shot at</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token comment">//Create the smaller asteroid debris </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createNewAsteroid</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createNewAsteroid</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>index <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            
       <span class="token punctuation">}</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span> r <span class="token operator">&lt;=</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token comment">//Adding the size as the asteroid as the value to be added to the score</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">+=</span> <span class="token number">100</span>
           <span class="token comment">//Remove the smallest asteroid </span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
       
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>For this Method we are passing the Asteroid Index that we are taking from the <code>forEach()</code> loop in the <code>shootLasers()</code> method. This allows us to then take some values and store that on the block scope for the function. We then are checking the radius of the asteroids, if they fall within a certain range of size we allocate the proportionate weight for their score.</p>
<p>Note that we are now keeping track of a score, this property is something we should add to the class constructor:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">/**@this this.currentScore - Keeps track of the score */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>And that should be that for shooting the lasers and making them blow up the asteroids into smaller pieces until they disappear.</p>
<p>We have made some excellent progress. We have managed to create the basics of the game engine, with user controls for the spaceship, firing lasers at uniquely self-generated asteroids, blowing them up into smaller pieces. Having the spaceship exploding and re-spawning with some conferred immunity in the center of the screen. Like I said, we have successfully made the game engine. Time to get a coffee and enjoy the fine work that has been done so far.....&#x1F680;&#x1F389;</p>
<h3 class="mume-header" id="my-hilary-step">My Hilary Step</h3>

<p>(Disclaimer - this next bit is somewhat of topic )</p>
<p>I must confess, I have had a bit of a journey with this particular exercise. It began from watching and trying to follow along with the youtube video that is posted at the top of this post. I started to run into issues with the way it was created and the bugs and Janking that I was experiencing when I was following along with the video and the instructors script. Having only recently learned about Object Orientated Programming from <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects">MDN learning Docs</a>  and created a couple of games prior to this. I thought I might carry out the same exercise.</p>
<p>In doing so, I have experienced a lot of technical complications upon rewriting this game to the aforementioned specification. With each technical challenge has had its own sense of reward after accomplishing them. But none more so than the problem that I have so far eluded to in this post.</p>
<p>Let me demonstrate my conundrum.</p>
<p>To begin we would be adding the following to our <code>.html</code> document as place holders</p>
<pre data-role="codeBlock" data-info="html" class="language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
    <span class="token selector"><span class="token id">#score</span></span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">90</span><span class="token unit">%</span><span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> ghostwhite<span class="token punctuation">;</span>
        <span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector"><span class="token id">#lives</span></span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">80</span><span class="token unit">%</span><span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> ghostwhite<span class="token punctuation">;</span>
        <span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>score<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lives<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</pre><p>We would need to now get these elements from the DOM and add some properties to the <code>GameModel</code> Object.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">    <span class="token comment">/** In the Global scope we are getting the Lives and Score elements from the DOM* - right at the top of the script/
    
    /**
     * @var scoreDisplay - Displays the Score on the DOM
     * @type {HTMLBodyElement}
     */</span>
    <span class="token keyword">const</span> scoreDisplay <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;score&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * @var livesDisplay - Displays the Score on the DOM
     * @type {HTMLBodyElement}
     */</span>
    <span class="token keyword">const</span> livesDisplay <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;lives&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/** Setting up the lives and score properties*/</span>
<span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">/**@this this.lives - Number of game lives*/</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lives <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token comment">/**@this this.currentScore - Keeps track of the score */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>The biggest problem I had was with reducing the lives by one every-time the ship exploded and had to be re-spawned. One would figure that simply by placing:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token comment">//method</span>
    <span class="token function">explodeShip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//At the End</span>
        model<span class="token punctuation">.</span>lives<span class="token operator">--</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Should do the trick, that we would be reducing the live&apos;s total incrementally by one each time the ship was instructed to explode.</p>
<p>And you wont be wrong in making that assumption. When we implement the said solution with this addition in the <code>gameAnimationLoop()</code> :</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">function</span> <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">//Display the Lives Counter on the Screen</span>
    livesDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>model<span class="token punctuation">.</span>lives<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token comment">//Display the Score on the Screen</span>
    scoreDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>model<span class="token punctuation">.</span>currentScore<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token comment">//Request animation frame</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</pre><p>You would begin to see the problem...Every time the ship explodes the counter decreases by 60. Now the root of this problem is down to our <code>requestAnimationFrame()</code> executing each scene every 1/60th of a second. So it re-executes the script that many times. This was a problem that had eluded me until I was explaining the role of FPS in another game to someone then it hit me like a tonne of bricks, and I have been silently jumping with self-satisfaction ever since.</p>
<p>Back to our code block we change the decrement to:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ShipObject</span><span class="token punctuation">{</span>
    <span class="token comment">//method</span>
    <span class="token function">explodeShip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//At the End</span>
        <span class="token comment">// model.lives-- </span>
        model<span class="token punctuation">.</span>lives <span class="token operator">-=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Here we are taking into account for the screen rate, however you would notice you would receive a long-tailed sum. So a solution would be to wrap the <code>livesDisplay.innerText =</code>${model.lives}<code>with a</code>.toFixed(0)` so it looks like:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">function</span> <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">//Display the Lives Counter on the Screen</span>
    livesDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>model<span class="token punctuation">.</span>lives<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token comment">//Display the Score on the Screen</span>
    scoreDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>model<span class="token punctuation">.</span>currentScore<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token comment">//Request animation frame</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</pre><p>Now the counter should decrease by one!...voila simple, sweet, problem solved,right? well not quite, if you console.log(model.lives) you would still get the long-tailed answer. When you wrap the property in a <code>.toFixed()</code> method, it returns a string. We cant really do maths with strings, since we have kept data-types consistent throughout this script, changing the output to a string would only introduce unwelcome bugs in the script.</p>
<p>So the next solution to rectify this problem and square it up is by setting another &apos;getter&apos; within the <code>GameModel</code> Object:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token keyword">get</span> <span class="token function">gameLives</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>lives<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Since the <code>.toFixed()</code> returns a string, we use the <code>+</code> operator again to convert the string to a Number. Now back to the <code>gameAnimationLoop()</code> we replace the <code>livesDisplay.innerText</code> with <code>livesDisplay.innerText =</code>${model.gameLives}`. Which should return the number of lives that we have left, in the correct format that we can work with.  Since we have a working lives counter we can have the game end when the lives reach 0.</p>
<p>When I climbed my Hilary Stepps, I have to say, I thought we would be close-to if not at the summit of this expedition. You can imagine my heartache when I discovered upon cresting that final step realising that it was only a false summit. But in the horizon for the first time I could see the mountain top, the finished article. Our morden replica of that nostalgic game from the ages.</p>
<blockquote>
<p>It is not the mountain we conquer but ourselves - Sir Edmund Hillary</p>
</blockquote>
<p>Onwards and upwards, as the saying goes.</p>
<h2 class="mume-header" id="half-time">Half-time</h2>

<p>Let&apos;s recap what we have managed so far:<br>
We have made a spaceship and asteroids both move on the screen. We have given them their own collision detection system. We can shoot lasers destroy them and keep track of both score and the player lives.</p>
<p>There was a few things that I have deliberately missed from the original tutorial was the addition of sounds, which I personally found quite annoying and very intrusive. Like the sounds, that just didn&apos;t do it for me.  In so wielding my power of editorial might &#x1F4AA;<br>
I also removed the blinking of the ship when it respawned, my justification being I just didn&apos;t want to induce an epileptic fit upon anyone.</p>
<p>Otherwise what we have written so far is the equivalent to the game that was created from the <a href="https://www.youtube.com/watch?v=H9CSWMxJx84&amp;ab_channel=freeCodeCamp.org">freeCodCamp: asteroids video</a>.</p>
<p>I am immensely grateful that you have stayed with me up until this point. I hope that you have been happy with the work that we have went through thus far. But I hope you agree with me that this is far from completed.</p>
<p>Remember what I said about this growing arms and legs, well since we now have the skeletal structure for the game, or a functioning game engine. The game was or rather I have been thinking long and hard about fleshing it out some more.</p>
<p>What I want to do next with this, is that I feel that we have created enough to actually make a modern replica of this retro arcade classic. Now these are some of the images that I have managed to source.<br>
<img src="assets/imgs/Asteroids-arcademachine.jpg" alt></p>
<p>This is what the full free-standing arcade machine looks:</p>
<img src="assets/imgs/AsteroidsFront1.jpg" alt>
<p>And this is what when I was a kid I thought was the height of portable gaming, long before I was introduced to a gameBoy.<br>
<img src="assets/imgs/asteroids-portable-arcade.jpg" alt><br>
<img src="assets/imgs/asteroids-portable-arcade-handheld.jpg" alt><br>
Honestly This was cool back in the day...</p>
<p>Comparing the two different set-ups in machines. Looking at the two one would think, build the portable machine for the mobile and smaller viewport and the free-standing machine for the larger desktops.</p>
<p>That sounds like a good idea but it is a lot of work. Here we will be looking to see if there is a way to take a mobile-first design view and see if we can build out the design to reuse most of the repeating elements that it contains.</p>
<p>So taking artwork from google I have stuck this small mock-up of what we should be looking to make for the web page:<br>
<img src="assets/imgs/asteroidsmockupUsingimgs.png" alt></p>
<p>Let&apos;s flesh out some design ideas for making such a replica.</p>
<p>Design Ambitions: Ideally I would ike to animate some of these images, there is a lot that his happening in them. Given that and  we are looking to make this as responsive as possible. I would be making the images up using SVG&apos;s. (with the intention of one-day coming back to fully animate them).</p>
<p>For the mobile I would like to have it only displaying the game screen keeping the heavy artwork and styling to the desktop or larger browsers. So we would be working with a responsive width of about 800px. This would easily cover tablets and any mobile device below that of a small screen.</p>
<p>With the Artwork, I would try my best to recreate the image above, however I would be using only SVG and CSS(Sass) to achieve this.</p>
<p>With the game, I was thinking of adding a couple of extra features to make it really make it into a replica of the old.</p>
<p>I wont be explaining the design process as I go, this is already turning from a tutorial to a tomb.</p>
<p>Once done, I&apos;ll have the final mark-up up and posted. So alas, I will save you a trip into the world of html, sass and drawing svg&apos;s. Just that I will be returning to this at towards the end with a summary of the code.</p>
<p>I would highly advise at this point you likewise take the time to come up with your own design for your work that we&apos;ve done so far. Its really good practice and I would strongly advise it. Put your own Mark on this project. For I would be extremely interested in seeing other variations of this replica game.</p>
<p>Coffee finished?....if so time for another one, because Marty we need to go back to the JavaScript...</p>
<h2 class="mume-header" id="model-view-controller">Model-View-Controller</h2>

<p>With the game we discussed earlier that we wished to add a couple of extra features.<br>
We will proceed to create a start screen, that would give users a cursory introduction to the game. It would then go on to create a new game. Once the user reaches the end of their allotted lives, it should provide a game-over screen and an input for them to save a name along with their score to the arcade machine (we would be using  the <code>localStorage</code> API for this.). We would also want to be able to display the high scores to the user.</p>
<p>Remember at the start that we discussed briefly that we would be adopting a MVC design pattern, well this is where it starts to be really introduced.</p>
<p>Lets summarize what we have exactly in respects to this design pattern.</p>
<p>I have deliberately kept the nomenclature for the terms that I have been using thus far to help with the mental model of the MVC.</p>
<p>Inadvertently we have already defined the game models. That being: <code>model=new GameModel()</code> and the Object classes of the Spaceship and the Asteroid.</p>
<p>We have defined their individual behaviours on their own prototype/method chains and shared logic within the reference <strong>model</strong>.</p>
<p>We also have created a single game <strong>view</strong>. That is the <code>gameAnimationLoop()</code>. This being our only <em>screen</em> at the moment. Since we are looking to introduce a start screen and a highscores display, along with an end screen that if the user has set a new highscores it would provide some input to enter the user name, otherwise it would show the highscores and a restart button.</p>
<p>We would need a <strong>Controller</strong>  to act as the glue between the views. This like the MVC design pattern is what is used to update the model and the view.</p>
<p>Then maybe, we can call it a day there...all depends on if this thing wishes to grow a head and start thinking on it&apos;s own. &#x1F631;</p>
<h2 class="mume-header" id="view-class">View class</h2>

<p>In order to achieve the following:</p>
<ol>
<li>Start Screen</li>
<li>Game Screen</li>
<li>End Screen</li>
</ol>
<p>We need to setup a class that allows us to use different animation loops in their own context.</p>
<p>To do this we write the following:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//RequestAnimationFrames reference numbers</span>
       <span class="token comment">/**@this this.startRaF - Registers the RequestAnimationFrame number for the start screen */</span> 
       <span class="token keyword">this</span><span class="token punctuation">.</span>startRaF
       <span class="token comment">/**@this this.gameRaF - Registers the RequestAnimationFrame number for the game screen*/</span> 
       <span class="token keyword">this</span><span class="token punctuation">.</span>gameRaF    
       <span class="token comment">/**@this this.endRaF - Registers the RequestAnimationFrame number  for the end screen*/</span> 
       <span class="token keyword">this</span><span class="token punctuation">.</span>endRaF

    <span class="token punctuation">}</span>
    <span class="token comment">//Methods-Game views go here</span>
<span class="token punctuation">}</span>

</pre><p>Before we go on with making up our various displays, I would like to share a bit of <em>wisdom</em>&#x1F914;. As we are creating more than one screen we would be using the <code>window.requestAnimationFrame</code> API, which has a few funny quirks that I had ran into getting this to work. One is that as you call the screens between each other the previous screens <code>requestAnimationFrame</code> is still firing off in the background, which severely complicates matters. Now there is a way to cancel this, and its important to get this straight away, else you would be scratching your head at the next bit.</p>
<p>The way <code>requestAnimationFrame()</code> works is that if the animation frame is called to the <code>window</code> object it passes the current call stack for that individual frame. It also allocates this call-stack with its own unique ID. This ID is * <em>cough</em> * key&#x1F601;. To help identify and stop the frame from interfering with the other screens.</p>
<p>The Opposing method to <code>requestAnimationFrame</code> is the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelAnimationFrame"><code>cancelAnimationFrame(id)</code></a><sup class="footnote-ref"><a href="#fn11" id="fnref11">[11]</a></sup> which takes in a ID of a animation frame and cancels the callback of that particular call stack or loop.</p>
<p>In order to store this value we would be placing it in the constructor class, as seen above.</p>
<p>Another point I wish to make before we proceed is on closure in Javascript. We will be enclosing each screen within its own method. This lets us redefine a few things a bit better and keep the models as they are meant to be through the different screens.  Which means we need to re-jig a few variables around, but we will do that as we come to it.</p>
<p>With the context of each method would have its own <em>Block Scope</em> from which the <code>requestAnimationFrame</code> would be <em>requested</em>. The actual Animation loop can remain within the enclosure of block function or game view, or it can sit separately as its own method, and be called by another.  I would demonstrate this again as we go along.</p>
<p>Lastly we would need to make a few DOM changes,</p>
<p>Back at the top of the script we place the following:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">/**
 * @constant outputDisplay 
 * @type {HTMLBodyElement}
 * @description JS Output Container DOM Element
 */</span>
<span class="token keyword">const</span> outputDisplay <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;.js-output&apos;</span><span class="token punctuation">)</span>
</pre><p>Now in the in the HTML file we add this to the markup:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gameLayer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gameCanvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Huh, your browser doesn&apos;t seem to support HTML5! Sorry bud,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...
<span class="token comment">&lt;!-- Add this to the Markup --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>js-output <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- JS-OUTPUT GOES HERE --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</pre><p>With all that out the way, lets start  creating the various screens.</p>
<h3 class="mume-header" id="start-screen">Start Screen</h3>

<p>For the start screen, I would like to create it similar to the start screen on the old arcade machine. This had the asteroids floating about in the background with a logo and a flashing &apos;Player One- Start!&apos; text.</p>
<p>To achieve this we would write the following method which would contain the variables needed for the Start Screen.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">//Methods</span>
    <span class="token function">startScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Block Scope</span>

        <span class="token comment">//Creating the asteroid Field</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>width <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//Reducing the number of asteroids to prevent screen clutter on lower sizes</span>
            model<span class="token punctuation">.</span><span class="token function">createAsteroidField</span><span class="token punctuation">(</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            model<span class="token punctuation">.</span><span class="token function">createAsteroidField</span><span class="token punctuation">(</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Getting the Title screen Image</span>
        
        <span class="token keyword">let</span> titleImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        titleImg<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&apos;./assets/graphics/asteroids-arcade-game-logo-sticker.svg&apos;</span>
        <span class="token comment">/**
         * @function getImgSize
         * Applies a scaling ratio to the image height and width to work with the canvas.
         */</span>
        <span class="token keyword">function</span> <span class="token function">getImgSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> scale <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>width<span class="token operator">/</span>titleImg<span class="token punctuation">.</span>width<span class="token punctuation">,</span> model<span class="token punctuation">.</span>height<span class="token operator">/</span>titleImg<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">*</span> devicePixelRatio
            titleImg<span class="token punctuation">.</span>width <span class="token operator">=</span> titleImg<span class="token punctuation">.</span>width<span class="token operator">/</span>scale
            titleImg<span class="token punctuation">.</span>height <span class="token operator">=</span> titleImg<span class="token punctuation">.</span>height<span class="token operator">/</span>scale
    
        <span class="token punctuation">}</span>
        <span class="token comment">// This is to keep the Image responsive to the viewport being resized.</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;resize&apos;</span><span class="token punctuation">,</span>getImgSize<span class="token punctuation">)</span> 



    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p>Breaking this out, we are firstly generating a Asteroid Field depending on the width of the canvas, to prevent an over crowding of asteroids on smaller screens.</p>
<p>Next we are requesting a <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image"><code>new Image()</code></a> to display the following image on the canvas.</p>
<img src="data:image/svg+xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS4wICg0MDM1YTRmYjQ5LCAyMDIwLTA1LTAxKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iYXN0ZXJvaWRzLWFyY2FkZS1nYW1lLWxvZ28tc3RpY2tlci5zdmciCiAgIHZpZXdCb3g9IjAgMCA3NzYuNTg2MyAxMzkuNTg3MTYiCiAgIGhlaWdodD0iMTM5LjU4NzE2IgogICB3aWR0aD0iNzc2LjU4NjMiCiAgIGlkPSJzdmcyIgogICB2ZXJzaW9uPSIxLjEiPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTgiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM2IiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSJ0cnVlIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIgogICAgIGZpdC1tYXJnaW4tcmlnaHQ9IjAiCiAgICAgZml0LW1hcmdpbi1sZWZ0PSIwIgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzIiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMjIyIgogICAgIGlua3NjYXBlOndpbmRvdy14PSItOCIKICAgICBpbmtzY2FwZTpjeT0iMzAuMzE5MzgyIgogICAgIGlua3NjYXBlOmN4PSI0MDguMDM2MDYiCiAgICAgaW5rc2NhcGU6em9vbT0iMC42NDk2NTQzNiIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgaWQ9Im5hbWVkdmlldzQiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iOTg3IgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBncmlkdG9sZXJhbmNlPSIxMCIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICBvcmlnaW55PSItMzAyLjAwMzMxIgogICAgICAgb3JpZ2lueD0iLTEuNDMxODA3MiIKICAgICAgIGlkPSJncmlkODM3IgogICAgICAgdHlwZT0ieHlncmlkIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxnCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTguMzY5Mjg3NiwtMjk5LjU0NDM5KSIKICAgICBpZD0iYXN0ZXJvaWRzVGl0bGUtZ3JvdXAiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJkaXNwbGF5OmlubGluZTtvcGFjaXR5OjE7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gOS4yMzU2ODA0LDQzNC44NDY2MiA3OC4xMTg0NjM2LC0xMzIuNzYyOTEgNTUuNDE0MDg2LDAuMzg0ODIgMi42OTM3NCwxMS45Mjk0MiBjIDEwLjYzNDY1LC02LjkyMDk0IDM1LjQ0NTExLC0yMi4zNzI1MiA2NS4yODYzMywtOS4yMjc4OCB2IC0yLjE3Njg3IGggMjM3Ljk1OTE4IGMgOC42MzA4OCwxLjQ2NDA5IDE3LjI3MjUsMy4xMTA4IDI2LjI1ODUxLDEwLjYxMjI0IDYuODg3MTcsLTQuODk4MzMgMTQuNDc4OSwtOS40ODM1MiAyNy44MDEzNiwtMTEuNTIxNzMgMTAuMTc4MzksLTIuMDM5NzEgMjEuNzIzNjYsLTEuNzM2MjEgMzQuNDQxMzksMC41NzcyMyA2LjEwMjYyLDEuNDI2OTggMTEuOTYwODgsNC4wNzU3OCAxNy43MDE3Myw3LjMxMTU4IGwgMS4xNTQ0NiwtNy41MDM5OSBoIDEwMC4wNTMyIGMgMTEuMjc4ODcsMS45ODQxIDIxLjM2NjA5LDUuNzAxNTEgMjguNjY5MDksMTMuNDY4NyA3LjA0NjU1LC02LjA3MjQyIDEzLjk3NDYxLC0xMi4yMTU5MyAyOC4wOTE4NiwtMTQuMDQ1OTMgOS44NzcwNSwtMi40Nzg5NyAxOS43NTQwOSwtMC45MzY1MiAyOS42MzExNCwtMC43Njk2NCAzOC4yNjEsMTAuMDUyMjkgNDAuMDYzMjIsMzEuMTU5MjkgNDEuOTQ1MzksMzkuMDU5MjQgdiAyOC42NjkwOSBoIC02LjU0MTk0IGMgMTMuNTYyNDMsNjIuMTg5NjQgLTU4LjUxODgsODYuMzY1NTUgLTEwNC4wOTM4Miw1My44NzQ4IC05LjA2ODg1LDUuODk1NDMgLTE4LjM3Njc1LDExLjQ0MzE2IC0zMS4zNjI4MywxMS42NDA4IGwgLTExNi42MDA0NywwLjA5NjIgYyAtMTMuMTcwMzIsNi41MDU1IC0yNi4wNTY0Miw0LjQ4NDQ1IC0zOC44NjY4MiwwLjE5MjQxIGwgLTY4LjMwNTU1LDAuNTc3MjMgLTMuMjcwOTcsLTUuMDAyNjYgdiA1LjE0NTM3IEggMjA5LjQ4NjQgTCAyMTEuMTk0MzUsNDI5IEMgMTkzLjg4MzY0LDQ0MC45MjQ2MyAxNzYuOTYwNjUsNDM3LjcyNzg4IDE2MCw0MzYgSCA5NSBsIC0yLC0xNCBoIC0yIGwgLTguMDgyOTA0LDE0IHoiCiAgICAgICBpZD0iYXN0ZXJvaWRzVGl0bGUtYmxhY2tGaWxsIgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjIiAvPgogICAgPHBhdGgKICAgICAgIGlkPSJhc3Rlcm9pZHNUaXRsZS1SZWRGaWxsIgogICAgICAgc3R5bGU9Im9wYWNpdHk6MTtmaWxsOiNmZjAzMjE7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZjAwMDA7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0ibSA3MjcuMDc4MTIsMzA2Ljc3MTQ4IGMgLTMuMDk4NjcsLTAuMDMzNyAtNi4xNTc4OCwwLjEzOTQ5IC04Ljg2MTMyLDAuNjIzMDUgLTEyLjMwNzYxLDIuMjAxNDQgLTI0LjI3MDUyLDQuNDAwNzggLTMzLjE4MzYsMTYuNzU1ODYgLTE0LjcwMjk1LC0xMy40Njg1NiAtMjIuOTMzMTYsLTEzLjg0ODg5IC0zMS4yMjQ2MSwtMTQuMzUzNTEgaCAtOTIuMzI4MTIgbCAtMi4xMDc0MiwxMS44MTI1IGMgLTYuNDk0OCwtNS4yOTI4OSAtMTIuNjA1MzgsLTEwLjE0MTY0IC0yMy4xMzA4NiwtMTIuNDQ1MzIgLTE0LjIyMTg1LC0zLjExMjY5IC0yMy43OTA2NSwtMS44NTcyIC0zMi45MjU3OCwwIC0xMy42OTEyNCwyLjc4MzQ3IC0xOS44ODY4NSw4LjM2MzM2IC0yOC4yOTY4OCwxMy40Nzg1MiAtMTIuNTU5NjYsLTEyLjE2MTgzIC0xOS4wMzM1MSwtMTEuOTY4OTIgLTI3LjAwOTc2LC0xMi43ODUxNiBIIDIxNS45Njg3NSB2IDMuMjM2MzMgYyAtNi4wNTEyMiwtMi4wMTgzMiAtMTIuMDA5NDUsLTQuNjgyMDYgLTE4LjI5ODgzLC01LjAzMTI1IC04LjQwMzcyLC0wLjk0NjA2IC0xNC44Mjg1OCwtMC41NzI4NSAtMjAuOTUzMTIsMCAtMTAuNzY4MzgsMi4yNTI1OCAtMjQuOTgzMTUsMS42NzkwMSAtMzYuMTg1NTUsMjIuNDU4OTggbCAtMy45NDkyMiwtMjEuMDg3ODkgSCA5MC4xODc1IGwgLTY5LjE0NDUzMSwxMTguODY3MTkgMC45OTgwNDcsLTAuMDAyIDU3LjE0MjU3OCwwLjgxNjQgNy42MTkxNCwtMTMuNjA1NDYgaCAxMy4yNDk5OTYgdiAxMy43NTc4MSBsIDU5LjI2NzU4LDEuMDg3ODkgYyAyMS4wMTgzMywwLjI4Mjk4IDQyLjY4MTc4LDQuNTU4NjQgNjEuNjMyODEsLTE1Ljc5Njg4IGwgLTIuMzc1LDE0LjQxOTkzIGggMTkwLjY3Nzc0IGwgNi45Mjc3MywtMzQuMTUyMzUgaCAxLjczMDQ3IGMgLTAuMDk1NywxMS42NjM4OCAtNC4yNzQwNiwyNC40OTQ1IDUuMDAzOTEsMzMuNDc4NTIgaCA1NC4wNjY0MSBsIC0xLjczMjQzLC01LjM4NjcyIGMgMTkuODcxODQsOS4yOTcgNDAuNTE4NzYsMTIuMjcyMDMgNjIuOTE3OTcsMC45NjA5NCBsIC0xLjM3MzA0LDUuMTI1IGggMTAxLjYxOTE0IGMgMTQuODA3NjcsLTEuMzc3OSAyNi44MDk0LC02LjQ5Nzc4IDM2LjE3MzgyLC0xNS4xMzA4NiA3Ljc1MjI5LDguNTUyNzkgMTUuMDIyNjksMTIuNjYwMjggMjEuNjU2MjUsMTQuNTE3NTcgMTguNTI2MDYsNS4xODcwOCA0OS4yMTIzNSw0LjgyODQ3IDY0LjgxODM2LC0xMi4yNjE3MSA5LjczNDQxLC0xMC42NjAxNyAyMS42MjgxMiwtMzAuODI1NjkgNC45OTAyNCwtNTQuMjI0NjEgaCAxMS45MDQyOSB2IC0xOC43NzUzOSBjIC0yLjM3NzUzLC0zMC40NjcwNCAtMjkuNDExNjgsLTMzLjY3NzEgLTM2LjUzMTI1LC0zNC45NjQ4NSAtMy45MTI3NiwtMC43MDc3MiAtOS4xODUxMywtMS4zMzY0MiAtMTQuMzQ5NjEsLTEuMzkyNTggeiBtIC0yMTAuMzc1LDQ3Ljc3MzQ0IGMgMi45MDI3NiwwLjI1ODkxIDIuMjg1NzksOS4zMjMyNyAxLjMxODM2LDEzLjg2MzI4IC0xLjE0NjAzLDUuMzc4MTggLTMuNDYsMTQuOTMwOTEgLTguMTIxMDksMTQuMzU5MzggLTQuNjYxMDksLTAuNTcxNTMgLTMuMzgzMDMsLTcuMzY5NTMgLTMuMTIzMDUsLTExLjI1MzkxIDAuMzgzMjQsLTUuNzI2MDMgMi43NDE4MiwtMTEuNzQzOTcgNi43NzM0NCwtMTUuODI4MTIgMC42NTMzOSwtMC42NjE5IDEuNjQyNTEsLTAuOTMwNjUgMi41NTA3OCwtMS4xMzA4NiAwLjE5NTg1LC0wLjA0MzIgMC40NTg1OCwtMC4xNTA2MyAwLjYwMTU2LC0wLjAxIDVlLTUsNWUtNSAwLDIuM2UtNCAwLDIuM2UtNCB6IG0gMTIzLjc2NTYzLDMuNDQ1MzEgYyA2LjA2MzA0LDAgMy42NTc5NCw2LjcyMTE2IDIuOTk0MTQsMTAuMjAzMTMgLTEuNTQ4NTIsOC4xMjI4MyAtMy43NDQ2MSwxMi42MTgxOSAtOC4zMDA3OCwxMS40Mjk2OSAtNC4xMTAxNSwtMS4wNzIxNiAtMi4wNjUyMywtMTAuNTM1OTQgLTEuNDk3NDksLTEyLjY1NDc3IDEuMTM4NDMsLTQuMjQ4NjggMS45Mjc2NywtOC45NzgwNSA2LjgwNDEzLC04Ljk3ODA1IHoiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9InNzY2NjY3NzY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY3NzY2Njc3NzY2F6YWFhYWNzc2FzcyIgLz4KICAgIDxwYXRoCiAgICAgICBpZD0iYXN0ZXJvaWRzVGl0bGUtWWVsbG93RmlsbCIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmMDA7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzI3Ljc1MzkxLDMxOS41MTc1OCBjIC00LjE0ODIsMC4wMDQgLTguMTY4MjYsMC4zMjY3OCAtMTIuMDY0NDYsMC45NjA5NCAtOC41MjQxLDIuMDI3MTggLTIyLjg0Njg2LDguMjk4OSAtMjYuMjY5NTMsMTguNzY5NTMgLTIuMTI3NzIsNi41MDkxMSAtMi44MTA1NiwxMy4yOTM4MSAwLDIwLjU0Mjk3IDIuNDM5ODcsNi4yOTMwMyAzLjQwMTE1LDEzLjM2OTYyIDM1LjA4OTg1LDIwLjU1NDY4IDUuMzY3ODYsMS45MjA1NyAxNi40MjgxNCwxMS45MjA2MSAwLDE3LjAwMzkxIGggLTExLjQyNzc0IGMgLTguMDQ4MTIsLTIuNjczMjEgLTYuMDEwNjcsLTguNzA0NjYgLTYuOTM1NTUsLTEzLjc1IGggLTI0LjA4MDA3IGMgNi4xMjc4MywtMTUuODQ4NzkgMTIuOTU3MDQsLTUxLjkxMDkzIC0yOC42ODk0NiwtNjIuNjA5MzggaCAtNDkuOTMxNjQgbCAtMTkuMDc2MTcsOTQuOTc4NTIgaCA1Ni4zMjYxNyBjIDExLjU2ODA1LC0yLjgyNjY3IDIyLjgzNDc3LC0zLjU0MDU2IDM2Ljg3ODkxLC0yMy42NjQwNiAxOS4wNDk0NSw0NC45Nzc0MiA3Ny45ODMzMiwyNS41NTkwMSA4My45MTc5NywtMS4xMzA4NiAzLjE1NzM1LC0xNC4xOTk1NyAtNC42MjA3LC0zMS4yOTcwMyAtMzguMzMwMDgsLTM2LjU0Mjk3IC04LjI4NTQsLTEuMzY4OTEgLTEyLjkzODc3LC04Ljk3MDE3IDAuMDA0LC0xNC40MTk5MiBoIDguNDM1NTQgYyAzLjEyODIxLDEuMTkzODYgNi4zMSwyLjI1MzI4IDYuOTM3NSw5Ljk0MzM2IGggMjcuODkwNjMgYyAtMS4wMjU2LC05LjY1OTAzIC0wLjM4OTgyLC0yMy40NTE5MSAtMjUuODQxOCwtMjkuNjc1NzggLTQuNDA4OTEsLTAuNjQ4NjkgLTguNjg1NzgsLTAuOTY0NTcgLTEyLjgzMzk4LC0wLjk2MDk0IHogbSAtOTkuODI4MTMsMjYuNDI1NzggaCAxNi45MzE2NCBjIDIwLjQ1OCwwIDguNTU2MDQsNDMuODAwMTggLTYuNzQ2MDksNDUuNzk0OTIgbCAtMTkuNDMzNiwtMC41ODIwMyB6IG0gLTU2LjQ1NDA4LC0yNC45NjE1MyAyOS42NTk4MiwwLjE0NDY1IC0xOS40ODM0OCw5NS42NDA2MiAtMzAuMjAzOTIsLTAuNTUyOTcgeiBtIC01Mi4yNDEyMywtMS40OTk0MSBjIC01LjE4NjQ3LC0wLjAyNDggLTEwLjI1NzM2LDAuNTA3IC0xNS4yMDg5OSwxLjY3MTg4IC0xNy44MjY3Nyw0LjE5Mzc1IC0yNy44Njc4MSwxNC41Mzk5NCAtMzQuMDY0NDUsMjguODc4OSAwLjY1MzM1LC0yNy4wNTgyIC0xNC42Nzc5MywtMjcuMDk5NzEgLTIxLjA2MjUsLTI3LjkwNDI5IGggLTU5LjA2ODM2IGwgLTE5LjU1NjY0LDkzLjk2ODc1IGggMjguODYxMzMgbCA2LjkzNTU1LC0zMi42OTkyMiBoIDE3LjEyNSBjIDIuODE5ODYsMC43NTA0NSA0LjUyMTYzLDAuNTMyNjkgNy40MTAxNSw3LjQxMDE1IC0wLjQ0NzM3LDguNjExMzMgLTMuMjM3NjEsMTcuODA2ODMgMCwyNS40OTgwNSBoIDI3LjU5OTYxIGMgLTAuODQ0ODEsLTEuMzU2MjYgLTEuNDQwMzYsLTIuODc4NDMgLTEuNTE3NTgsLTQuNzQ2MDkgdiAtMjcuOTU4OTkgYyAwLjA1OTQsLTcuMjA0MjQgLTMuNDkyMjYsLTEwLjAyNTM5IC04LjQ5MjE4LC0xMS4wODk4NCA2LjY2NzEzLC0wLjcwNjYgMTEuNjgwMjIsLTUuMDU1OTEgMTYuNTY2NCwtOS42ODM2IGwgLTAuNzc1MzksMjEuNTQ4ODMgYyAxLjI1ODIsMTIuOTI2MDYgMy44MDg0MSwyOS42NzI3IDM1Ljk3MDcsMzMuNzc5MyA0LjA2NTEyLDAuMzI1NSA4LjAxMzMxLDAuNzI4MzIgMTMuNjYwMTYsMCA1LjUwODU2LC0xLjMzNDY5IDMyLjc5MTEsLTEuMDY4ODIgNDUuMDkxOCwtNDAuNDQxNDEgMi44NTE4NCwtOS4xMjgzMSAzLjQxNTg2LC0yMi4wMDA5MiAwLjEzNjcyLC0zMi44NDk2MSAtMi43NzA2NywtOS4xNjY0NiAtNi40NzQyMSwtMTcuOTU3OTcgLTIzLjcwODk5LC0yMy43MTA5MyAtNS40MTMxMiwtMS4wNjU2IC0xMC43MTU4NywtMS42NDcwNiAtMTUuOTAyMzQsLTEuNjcxODggeiBtIC0yLjkwMjM1LDIzLjcxMjg5IGMgMS4yODI3MywtMC4wMTU5IDIuNTM1MzIsMC4xNTEwMyAzLjczODI5LDAuNDk4MDUgOS43NjAwNiwyLjgxNjU5IDE0LjI3MjI3LDE2LjY0NTI5IDEwLjA3ODEyLDMwLjg4NjcyIC00LjE5MzU5LDE0LjI0MDMxIC0xNS41MDQyNCwyMy41MDEzMiAtMjUuMjYzNjcsMjAuNjg1NTQgLTkuNzYwMDYsLTIuODE2NTggLTE0LjI3MjI4LC0xNi42NDUyOCAtMTAuMDc4MTMsLTMwLjg4NjcxIDMuNjAwNTksLTEyLjIyNjQ0IDEyLjU5MDUyLC0yMS4wNzM2MiAyMS41MjUzOSwtMjEuMTgzNiB6IG0gLTEwMi4xNjk5MiwwLjk1MzEzIGggMTkuNjI2OTYgYyAxMC40OTAxLDAgMTAuNTA2NDMsMTguNDI4OTYgLTMuODUzNTIsMTguMjgzMiBsIC0xOS40MzM1OSwtMC4xOTcyNiB6IG0gLTIyNi42NTAzOSwtMjQuODEyNSBjIC0zLjgzMjYxLDAuMDI4IC03LjY2NTQ5LDAuNDIwMjIgLTExLjQ5NjA5LDEuMDkzNzUgLTguNDkyMDUsMS40OTMxNCAtMjMuNjM1MSw1LjI4NDM5IC0yOC42NjIxMSwyMy44NjMyOCAtMS4wOTc2Myw0LjA1NjY0IC0xLjAwNjI2LDguMjk0NDEgMCwxMi42OTkyMiAxLjYwOTM1LDcuMDQ0NzQgNS42MzkxMSwxMC43NDA2NSAxMC4xMDM1MSwxMy44NTE1NiA3LjU1MzY2LDUuMjYzNTkgMTcuNDM3NDgsNi40MDU4MyAyNi40NjA5NCw5LjcxMjg5IDE1Ljc0NDYxLDUuNzcwMzIgNy44MDExNywxNS42NDUzNiAwLDE2LjgzNzg5IC00LjkzNTg1LDAuNzU0NTIgLTguNDAzNzMsMC42NDE5MiAtMTEuMTYwMTUsMCAtOC4xNzk2LC0yLjUzMjczIC02LjYxNTEyLC03Ljg0NjUgLTcuNjk5MjIsLTEyLjQwNDMgaCAtMjguNjY3OTcgbCAtOS42MzA4NiwtNjMuNTQ2ODcgSCA5Ni45ODYzMjggbCAtNTQuOTcyNjU2LDk1LjIxMjg5IDI5Ljk0NzI2NiwwLjU2MDU1IDcuOTY0ODQzLC0xMy43OTY4OCBoIDMwLjQwMDM4OSBsIDEuMjQ4MDUsMTMuODYxMzMgaCAyOS44MjIyNiBsIC0zLjE2Nzk2LC0yMi42ODE2NCBjIDE0LjMzNDk4LDM4LjEzNjc4IDYzLjIyMTgzLDIzLjA5MjkxIDcyLjY0NjQ4LDEzLjI4NTE2IDExLjYzODYxLC0xMi4xMTE3MiAxNS44Nzc1OSwtMjguMTIzOTggLTAuNDYwOTQsLTQzLjIxMjg5IC01LjcyNDI3LC01LjI4NjQ2IC0xNi4yMDQxNSwtNy42MDA5NSAtMjkuMTY2MDEsLTEwLjQ4ODI5IC05LjIxMzM4LC0yLjczNzUxIC05LjQxNTY5LC05LjQzMjQ3IC0wLjE5OTIyLC0xMy41MzMyIDAuMDY1NSwtMC4wMjkxIDAuMTMyNzIsLTAuMDU4OSAwLjE5OTIyLC0wLjA4NzkgMi4yMjAwMywtMC45NjkyNyA2LjQ4NzA5LC0xLjIwNzM5IDEwLjg5NDUzLDAgMC4yNzgzOSwwLjA3NjMgMC41NDUzOCwwLjE2MjAxIDAuNzk4ODMsMC4yNTc4MSA0LjIzODYsMS42MDE4OCA1LjA2MDQ1LDUuODM5MzkgNC44NTE1Niw5LjUyNzM1IGggMjYuOTM3NSBsIDAuMTkzMzYsLTQuMjI2NTcgaCAyMi42MDc0MiBsIC0xNC4yNTc4MSw3MC40MjU3OSBIIDI2MyBsIDE0LjY0NDUzLC03MC40MTc5NyAyNC45MTYwMiwtMC4yODEyNSAtMTQuNzQwMjQsNzAuNjM0NzYgaCA4MC4zMzIwMyBsIDUuMDA5NzcsLTI0Ljc5ODgzIGggLTUwLjgzMjAzIGwgMy4wMjE0OCwtMTEuMjcxNDggaCA0NC44MDI3NCBsIDYuMTYyMTEsLTIzLjAwMTk1IGggLTQ2Ljg5ODQ0IGwgMi45MzE2NCwtMTAuOTQzMzYgaCA0OS45Mjk2OSBsIDUuMTkxNCwtMjQuODkwNjMgSCAyMjYuNjE1MjMgbCAtMi41OTM3NSwxNC43MjA3MSBoIC0xLjkyNTc4IGMgLTIuNTA5ODIsLTYuNzQ2MTEgLTguOTk3NjYsLTEyLjM3NTU2IC0yMy4wOTE3OSwtMTUuODY3MTkgLTMuODMxOTQsLTAuNzg1NjEgLTcuNjYzNDgsLTEuMTIxNzcgLTExLjQ5NjEsLTEuMDkzNzUgeiBtIC04Mi4zMDQ2OSwzNi4wNjgzNiAzLjgwMDc5LDI3LjQ4NDM3IC0xOC41MDE5NTcsLTAuMjc3MzQgeiIgLz4KICA8L2c+Cjwvc3ZnPgo=" alt>
<p>We then provide the image with a scaling function that takes the initial dimensions of the image and applies a ratio that is respective of both the size of the canvas and the pixel ratio.</p>
<p>We then apply an event listener to the document to be cognisant of its own dimensions as the window resizes.</p>
<p>The <code>outputDisplay</code> variable is used as UI that we can interact with through JavaScript. As we start working with the different screens by having this GUI element on the DOM we can literally throw what we want at it and we can render it, on top of the rendering that is occuring separately on the canvas. This really is a form of slight of hand. Where we can turn the <code>outputDisplay</code> on or off by using CSS <code>display:hidden</code>.</p>
<p>Next we are going to be setting up the function for the AnimationLoop. We would be placing this directly within  the current clock scope that we are working in.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
<span class="token operator">...</span>
    <span class="token function">startScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token keyword">function</span> <span class="token function">startAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// Because the start screen would be loaded more than once, we would want to make sure that the previous rendered content is removed from the window</span>
            <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>startRaF<span class="token punctuation">)</span>
            <span class="token comment">// Clears the Display</span>
            ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Painting it black</span>
            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;black&apos;</span>
            ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//Drawing each asteroid on the screen</span>
            model<span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">asteroid</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                asteroid<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token comment">// Making the Title Image responsive to the width of the canvas: 500px </span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>width <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
                ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>titleImg<span class="token punctuation">,</span> model<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> titleImg<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span>titleImg<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">,</span>titleImg<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                
                ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>titleImg<span class="token punctuation">,</span> model<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> titleImg<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span>titleImg<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>titleImg<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// Welcome Screen Intro text</span>
            ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&apos;gold&apos;</span>
            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1</span>
            ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&apos;2.5rem hyperspace&apos;</span>
            ctx<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">&apos;1 PLAYER&apos;</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">50</span> <span class="token punctuation">,</span>model<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span>
            ctx<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">&apos;ENTER TO START&apos;</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span><span class="token number">95</span> <span class="token punctuation">,</span>model<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span>

            <span class="token comment">//Assigning the value of the requestAnimationFrame to a variable</span>
           view<span class="token punctuation">.</span>startRaF<span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>startAnimationLoop<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Cancelling  any previous Game and End Screen requestAnimationFrame</span>
        <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>gameRaF<span class="token punctuation">)</span>
        <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>endRaF<span class="token punctuation">)</span>
        
        <span class="token comment">//Requesting Animation Loop for the Start Screen</span>
        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>startAnimationLoop<span class="token punctuation">)</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>I decided to introduce a blinking motion to the text. I did this by creating a variable on the outer block scope:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">//Setting a value for the Blinker duration</span>
    <span class="token keyword">let</span> blinkDuration <span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
</pre><p>Back in the <code>startAnimationLoop</code> we wrap the welcome screen text in the following  <code>if</code> statement where we only blink when the division of the <code>blinkDuration</code> divides neatly into 30, every other time we instruct it to draw the text. We then reset the timer when it reaches 0 and <code>setInterval</code> macro-promise to decrease the timer at every 60ms.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>blinkDuration <span class="token operator">%</span> <span class="token number">30</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&apos;gold&apos;</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1</span>
    ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&apos;2.5rem hyperspace&apos;</span>
    ctx<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">&apos;1 PLAYER&apos;</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">50</span> <span class="token punctuation">,</span>model<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">&apos;ENTER TO START&apos;</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span><span class="token number">95</span> <span class="token punctuation">,</span>model<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// Reset the blink timer on the Outer Block scope</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>blinkDuration <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    blinkDuration <span class="token operator">=</span> <span class="token number">360</span>
<span class="token punctuation">}</span>

<span class="token comment">//Decrease the Blinker</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    blinkDuration <span class="token operator">--</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span><span class="token punctuation">)</span>
</pre><p>Now In order to view these screens that we would be creating, the line above where we invoke the <code>gameAnimationLoop()</code> we would place our new screen, we would comment out the game screen for now as we have yet to set that up properly. Also on the to-do list would be to setup the event handlers but we would do that once we get to setting up the controller:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Comment out the screens to alternate between the different screens</span>
view<span class="token punctuation">.</span><span class="token function">startScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//gameAnimationLoop();</span>
</pre><img src="assets/graphics/asteroid-welcomescreen.png" alt="Screenshot of the welcome screen">

<h3 class="mume-header" id="game-screen">Game Screen</h3>

<p>We have already spent a fair bit of time and energy working on the game mechanic&apos;s. Working on what is in effect the game screen.</p>
<p>However we have been mainly working with the animation loop as a function, out with the existing design pattern we are following for this game.</p>
<p>Moving the animation loop over to the <code>class GameView</code> is not quite a simple copy and paste job. its more like copy-paste and hack the rest in to fit.</p>
<p>Lets begin by cutting the <code>gameAnimationLoop()</code> that we have already worked on, and relocating it to the <code>class GameView</code> methods chain. It should look something like this.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token comment">// Methods</span>
    <span class="token operator">...</span>
    <span class="token comment">/**
     * @method gameAnimationLoop
     * @description Demonstrating another way of calling a request Animation Loop outwith the internal closure of a function. Plus this way I can ensure that the game would run independent of anything else, (there was a bug that caused this outcome)
     */</span>
    <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Clearing the Previous Render</span>
        ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
        <span class="token comment">// Create a new Frame</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Paint it Black - No colours any more</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;black&apos;</span>

        <span class="token comment">// If the spaceship exists </span>
       <span class="token keyword">if</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">)</span><span class="token punctuation">{</span> 
           <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>model<span class="token punctuation">.</span>shipExploding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Draw the &#x1F680;</span>
            spaceship<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token comment">//  Explode the ship&#x1F480;</span>
                spaceship<span class="token punctuation">.</span><span class="token function">explodeShip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">//Timeout&apos;s to carry out these functions after a certain period of time.        </span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>createNewSpaceShip<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
                
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token comment">//Removing the ships immunity after 5 secs</span>
                    spaceship<span class="token punctuation">.</span>immune <span class="token operator">=</span> <span class="token boolean">false</span>
                
                <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span>

            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//create new asteroids when the field is empty</span>
            model<span class="token punctuation">.</span><span class="token function">createAsteroidField</span><span class="token punctuation">(</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//Drawing each asteroid on the screen</span>
        model<span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">asteroid</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            asteroid<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token comment">//Display the Lives Counter on the Screen</span>
        livesDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token string">`LIVES\n </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>model<span class="token punctuation">.</span>gameLives<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
        
       
        <span class="token comment">//Display the Score on the Screen</span>
        scoreDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token string">`SCORE\n </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>model<span class="token punctuation">.</span>currentScore<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
        
        <span class="token comment">//Remove Event Listeners from the previous Screen</span>

        <span class="token comment">//Apply the event Listeners</span>
  
        <span class="token comment">// Assigning the requestAnimationFrame to a variable</span>
        view<span class="token punctuation">.</span>gameRaF <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>gameAnimationLoop<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p>Next up we would be creating an outer scoped method, that would call the animationLoop that we have just redefined as a method on the <code>class GameView</code> literal. There is two purposes to this. One was to correct a resistance bug that I had came across when changing across the screens. The other was to demonstrate different forms of closure that we can use in JavaScript to achieve the same outcome as we had defined in the <code>startScreen()</code> where the animation loop was defined within the inner scope of the method.</p>
<p>Above this method we would be writing the outer method, that contains the block scope for the game. This would require us to redefine the spaceship variable on the global scope to the inner block scope of this method, from which the game loop would then use to reference the models it needs to render on the screen.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Global Scope</span>
<span class="token comment">// Change the spaceship reference from</span>
<span class="token keyword">let</span> spaceship <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShipObject</span><span class="token punctuation">(</span>
            model<span class="token punctuation">.</span>width <span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
            model<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token number">30</span><span class="token punctuation">,</span>
            <span class="token number">90</span><span class="token punctuation">,</span>
            <span class="token number">360</span><span class="token punctuation">,</span>
            <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// To</span>
<span class="token keyword">let</span> spaceship<span class="token punctuation">;</span>
</pre><pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token comment">// Methods</span>
    <span class="token function">gameScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       
        <span class="token comment">//Games Block Scope</span>

        <span class="token comment">// Create a New Ship object on the global scope</span>
        spaceship <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShipObject</span><span class="token punctuation">(</span>
            model<span class="token punctuation">.</span>width <span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
            model<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token number">30</span><span class="token punctuation">,</span>
            <span class="token number">90</span><span class="token punctuation">,</span>
            <span class="token number">360</span><span class="token punctuation">,</span>
            <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Populating the Asteroid Field for the Game to Start</span>
        model<span class="token punctuation">.</span><span class="token function">createAsteroidField</span><span class="token punctuation">(</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">// Clearing the outputDisplay</span>
        outputDisplay<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
        
        <span class="token comment">//Cancelling all previous versions of Request Animation Frames that might still persist on the window</span>
        <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>startRaF<span class="token punctuation">)</span>
        <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>gameRaF<span class="token punctuation">)</span>
        <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>endRaF<span class="token punctuation">)</span>
        
        <span class="token comment">// Requesting Animation Loop for the Game Screen</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>gameAnimationLoop<span class="token punctuation">)</span>
        
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</pre><p>Now to test this we would change our existing invocation for the <code>gameAnimationLoop</code> on the global scope to <code>view.gameScreen()</code> and we can comment out the <code>view.startScreen()</code> to see the render of the new game screen.</p>
<h3 class="mume-header" id="end-screen">End Screen</h3>

<p>With the final screen, I wanted it to display two different outputs one was for when a new high score is set and another is where the high score hasn&apos;t been set. For the new high score we would call it the winners screen here we would want to capture the user name and their score. We would then like to pass it into the memory to persist, through new game sessions and over time. For the winners screen I also wanted to celebrate their win with some fireworks.</p>
<p>But first we need to address the elephant in the room. In order to achieve the functionality we need for the last screen we would have to determine if the current session sets a new high score.</p>
<p>To do this we are going to setup the highscore functionality for the game.</p>
<h4 class="mume-header" id="high-scores">High Scores</h4>

<p>Here we are going to be adding to the game the ability of storing the high scores, checking if the current session score is higher than the previous highest score, if it is we would capture the user name via an input on the DOM and store it into the localStorage module.</p>
<p>In order to do this we would need to add a few variables to the global scope and also create a couple of methods on the Game Model for us to provide this sort of functionality.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Global Scope</span>
<span class="token comment">/**
 * @constant highScoresTable 
 * @type {HTMLBodyElement}
 * @description  Creating a Order List Element on the Dom to Store the High Scores
 */</span>
<span class="token keyword">const</span> highScoresTable <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&apos;ol&apos;</span><span class="token punctuation">)</span>
<span class="token comment">// Applying a class to the Element</span>
highScoresTable<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;highScoresTable&apos;</span><span class="token punctuation">)</span> 

<span class="token comment">/**
 * @constant currentHighScoreDisplay
 * @type {HTMLBodyElement}
 * @description Displays the Current High Score on the DOM
 */</span>
<span class="token keyword">const</span> currentHighScoreDisplay <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;highScore&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</pre><p>Within the constructor block of the <code>class GameModel</code> we will be adding the following:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">/**@this this.highScoresFromStorage - Obtains the HighScores from the LocalStorage API, if present would return an array of object&apos;s each containing a record of the highscores, if not the it would present null */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>highScoresFromStorage <span class="token operator">=</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&apos;highScores&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&apos;highScores&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>

        <span class="token comment">/**@this this.previousHighScore - Takes the previous games highest score if available, else it would return 0 */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>previousHighScore <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>highScoresFromStorage<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>highScoresFromStorage<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>score <span class="token punctuation">:</span> <span class="token number">0</span>

        <span class="token comment">/**@this this._playerName - **PRIVATE** stores the players name */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_playerName <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</pre><p>Here we are using the ternary <code>(if)? true : false</code>statement. I personally refer to this form of writing If&apos;s and logic as a <em>&apos;This or that&apos;</em> statement. Slightly different semantically to the standard <code>If</code> statement.</p>
<p>Here we are saying for the <code>this.highScoresFromStorage</code> is either going to be, an array of Objects from the LocalStorage, <em>if</em> their is an Item in the LocalStorage <em>else</em> we would be declaring it as a null field. This would be the case if this is the first use of the game on the client browser, or if no score has been entered before.</p>
<p>We are <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax">spreading</a> the objects into an array by writting: <code>[...JSON.Parse()]</code>[^] JSON.parse takes a string of JavaScript Objects and converts it back from String into Object form.</p>
<p>Now you might be wondering why that is the case. Its because when we use the <code>localStorage()</code> or <code>SessionStorage()</code> API [^] we have to enter strings of Key:value pairs into the storage API, anything else tends to be a security concern.</p>
<p>Next, we are saying if the variable <code>this.highScoresFromStorage</code> is populated with a list of records containing the previous highest scores.  We would take the score from the Zeroth index position from the list of records (the highest score position) and display that value else it would a 0 that we would display.</p>
<p>Lastly we would be needing to acquire the name of the player at some point, so we would create this variable here so we can use it later on.</p>
<p>Now lets get this setup, first we would be checking if the current score for the game session is greater than the previous highest score for the game. If this is the case we would toggle the flag in the <code>view.newHighScore</code> from false to true</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// Methods</span>
    <span class="token comment">/**
     * @method checkScore 
     * @description Checks if the current score is greater than the previous score, Switching the *view.newHighScore* to true
     */</span>
    <span class="token function">checkScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>previousHighScore<span class="token punctuation">)</span><span class="token punctuation">{</span>
            view<span class="token punctuation">.</span>newHighScore <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Creating the Flag within the <code>GameView</code> Literal.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        
        <span class="token comment">/**
         * @this this.newHighScore - Flag for if a new high Score is set to record a view change from winners text to game over display
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>newHighScore <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Next we would be creating a function that takes the current score and the players name and stores it within the memory, using <code>LocalStorage()</code>API, the reason why we are using this API over the <code>SessionStorage</code>API is because we wish for the data to persist over time, and in-between sessions.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// Methods</span>
     <span class="token comment">/**
     * @method addScore
     * @description Creates a record of the new high score and captures the players name as well. It then sorts and stores it to the LocalStorage, repopulating the High Score Table with the new values
     */</span>
    <span class="token function">addScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">let</span> storageArray <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>highScoresFromStorage<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>highScoresFromStorage<span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        
        <span class="token keyword">let</span> record <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_playerName<span class="token punctuation">,</span>
            score<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore
        <span class="token punctuation">}</span>
        storageArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span>
        storageArray<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span>  b<span class="token punctuation">.</span>score <span class="token operator">-</span> a<span class="token punctuation">.</span>score
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>storageArray<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            storageArray<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&apos;highScores&apos;</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>storageArray<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">populateHighScoresList</span><span class="token punctuation">(</span>storageArray<span class="token punctuation">,</span>highScoresTable<span class="token punctuation">)</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Here we are creating an array either filled with records from storage or an empty array, if there is no stored data from previous sessions.</p>
<p>We then create a record object, that stores the players name and the current score of the session. We <em>push</em> this to the internal array and <em>sort</em> it based on the value of the score in ascending order.</p>
<p>If there is more than 5 scores in the array we would then <em>remove</em> the lowest score from it to maintain the 5 highest scores from the previous sessions.</p>
<p>Now we use the <code>localStorage</code>API to set and store the array to storage. As we already mentioned earlier that the Storage facility that is provided to us by the browser only accepts strings of data, we would need to convert the array of objects into a string of objects. To do this we use the <code>JSON.stringify(array)</code> to convert the data into a format that would be accepted by the storage API. We then <em>set</em>  this value as <code>highScores</code> within the Storage Module.</p>
<p>Lastly we would then run a <code>this.populateHighScoresList()</code> method. This method is where we take the ordered list on the DOM and populate it with the new results. To do this we would simply <em>map</em> the new records to the <code>&lt;ol&gt;</code> located on the DOM.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">/**
     * @method populateHighScoresList 
     * @param {Array} scoresArray 
     * @param {HTMLOListElement} DOMList 
     * @description Maps a record of the scores as HTML List item&apos;s to the HTML Ordered List Element 
     */</span>
    <span class="token function">populateHighScoresList</span><span class="token punctuation">(</span><span class="token parameter">scoresArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> DOMList</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        DOMList<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> scoresArray<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`
            
            &lt;li class=&quot;scoreEntry&quot;&gt;
            &lt;span class=&quot;scoreEntry-Name&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>record<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/span&gt;
            &lt;span class=&quot;scoreEntry-Score&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>record<span class="token punctuation">.</span>score<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/span&gt;
            &lt;/li&gt;
            
            `</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&apos;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//&#x1F60E;</span>
    <span class="token punctuation">}</span>

</pre><p>That should do it for tracking to see if the game has set a new highscore, a function to take that highscore and save it to the browser, and a mechanism to populate a list with the records of the previous highest scores onto the DOM.</p>
<p>Now since we can determine the outcome of the end screen whether or not to display a celebratory screen or a game over screen. We ought to make this up.</p>
<p>Now its time for some fireworks!!</p>
<h4 class="mume-header" id="fireworks">Fireworks</h4>

<p>I have sourced this algorithm from the following tutorial: <a href="https://slicker.me/javascript/fireworks.htm">Let&apos;s Celebrate with Fireworks!</a> I have adapted this to fit the game. Credits to the original author (whomever they may be) for their hard work. There is an explanation on the site as to how the overall algorithm works.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token comment">// Methods</span>
    <span class="token function">endScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token comment">// Screen Block Scope</span>
        
        
        <span class="token comment">//FireWorks gets declared here</span>

        <span class="token comment">/**@constant max_fireworks - Max number of Fireworks to be generated */</span>
        <span class="token keyword">const</span> max_fireworks <span class="token operator">=</span> <span class="token number">10</span>
        <span class="token comment">/**@constant max_sparks - Max number of sparks that is made from each firework */</span>
        <span class="token keyword">const</span> max_sparks <span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">;</span>
        <span class="token comment">/**@let - fireworksArray - Array storing the Firework Objects as they are made */</span>
        <span class="token keyword">let</span> fireworksArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        
        <span class="token comment">// For-loop to generate the individual firework objects</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> firework <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> firework <span class="token operator">&lt;</span> max_fireworks<span class="token punctuation">;</span> firework<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// Each firework has an array of where each sparkler effect is stored in</span>
            <span class="token keyword">let</span> firework <span class="token operator">=</span> <span class="token punctuation">{</span>
                sparks<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> max_sparks<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// Generating the sparkler</span>
                <span class="token keyword">let</span> sparkler <span class="token operator">=</span> <span class="token punctuation">{</span>
                    vX<span class="token punctuation">:</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token operator">/</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token number">0.5</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    vY<span class="token punctuation">:</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token operator">/</span>model<span class="token punctuation">.</span><span class="token constant">FPS</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token number">0.5</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    weight<span class="token punctuation">:</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//size of the sparkles</span>
                    color<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span>
                <span class="token punctuation">}</span>
                firework<span class="token punctuation">.</span>sparks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sparkler<span class="token punctuation">)</span>
                
            <span class="token punctuation">}</span>
            fireworksArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>firework<span class="token punctuation">)</span>
            <span class="token comment">// providing some extra de-facto information to the firework</span>
            <span class="token function">resetFirework</span><span class="token punctuation">(</span>firework<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">/**
         * @function resetFirework
         * @param {Object} firework 
         * Provides reset and default values for each of the fireworks
         */</span>
        <span class="token keyword">function</span> <span class="token function">resetFirework</span><span class="token punctuation">(</span><span class="token parameter">firework</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// Random Position on the X-axis</span>
            firework<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> model<span class="token punctuation">.</span>width
            <span class="token comment">// Bottom of the screen</span>
            firework<span class="token punctuation">.</span>y <span class="token operator">=</span> model<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
            <span class="token comment">// Keeps track of the time the firework exists for</span>
            firework<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">// Applies the Flying &apos;phase&apos; of the firework</span>
            firework<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">&apos;fly&apos;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">explodeFirework</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// Clear the screen after each explosion</span>
            ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Looping through the firework Array</span>
            fireworksArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">firework<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token comment">// Checks the status of the firework</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>firework<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">&apos;explode&apos;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">// While the firework is exploding Draw the sparklers</span>
                    firework<span class="token punctuation">.</span>sparks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">spark</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token comment">// Defining properties for the sparkler effects</span>
                            <span class="token keyword">let</span> trailAge <span class="token operator">=</span> firework<span class="token punctuation">.</span>age <span class="token operator">*</span> index 
                            <span class="token keyword">let</span> x <span class="token operator">=</span> firework<span class="token punctuation">.</span>x <span class="token operator">+</span> spark<span class="token punctuation">.</span>vX <span class="token operator">*</span> trailAge <span class="token operator">*</span> <span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span>
                            <span class="token keyword">let</span> y <span class="token operator">=</span> firework<span class="token punctuation">.</span>y <span class="token operator">+</span> spark<span class="token punctuation">.</span>vY <span class="token operator">*</span> trailAge <span class="token operator">*</span> <span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span>
                            <span class="token keyword">let</span> fade <span class="token operator">=</span> <span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token template-string"><span class="token string">`rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token operator">*</span>fade<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token operator">*</span>fade<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token operator">*</span>fade<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,1)`</span></span>
                            <span class="token comment">// Draw the sparklers</span>
                            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color<span class="token punctuation">;</span>
                            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>spark<span class="token punctuation">.</span>weight<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span>
                            ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Increase the Age of the firework</span>
                    firework<span class="token punctuation">.</span>age<span class="token operator">++</span>
                    <span class="token comment">// Make the firework reset if it gets to old or just by pure randomness</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>firework<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span><span class="token operator">*</span><span class="token number">1.5</span> <span class="token operator">&amp;&amp;</span> <span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">resetFirework</span><span class="token punctuation">(</span>firework<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span><span class="token punctuation">{</span>
                    firework<span class="token punctuation">.</span>y <span class="token operator">=</span> firework<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">10</span>
                    <span class="token comment">// This draws the firework tail on the canvas</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> spark <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> spark <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> spark<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span> <span class="token template-string"><span class="token string">`rgba(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index <span class="token operator">*</span> <span class="token number">50</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>spark <span class="token operator">*</span> <span class="token number">17</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 0,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span>
                        ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span>firework<span class="token punctuation">.</span>x <span class="token punctuation">,</span> firework<span class="token punctuation">.</span>y <span class="token operator">+</span> spark<span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
                        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// Sets the conditions when the firework would explode</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">randomNumberDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.01</span> <span class="token operator">||</span> firework<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">)</span> firework<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">&apos;explode&apos;</span>
                
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// End of Fireworks</span>
</pre><p>Lets explain some of the above. Firstly we  define a few variables on the block scope of the screen, this is to set the number of fireworks that we would want to generate, the next is the number of sparkling effects that each firework would create when it explodes.</p>
<p>Each firework is made up of an object that contains an array of sparklers. We give the each of the sparklers a few random properties. And provide the firework with some information that resets after each explosion.</p>
<p>There is two <em>phases</em> to the firework. When the firework is &apos;flying&apos; we are creating a simple tail animation. To determine if a firework explodes occurs through randomness or if the firework reaches a certain height of the canvas.</p>
<p>When the fireworks explode we display the sparkler effects on the screen. Once its done exploding we reset the firework to then take off at a random location along the width of the canvas.</p>
<p>Now we set the animation loop up to display the fireworks on the winners screen or we would draw the asteroids that were left in the asteroid field on the screen.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token function">endScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// End of Fireworks</span>
        <span class="token comment">// Animation Loop</span>
        <span class="token keyword">function</span> <span class="token function">endAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// Another Demonstration of CancelAnimation Frame this time within a requestAnimation recursive Loop</span>
            <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>startRaF<span class="token punctuation">)</span>
            <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>gameRaF<span class="token punctuation">)</span>

            <span class="token comment">// Clear the Previous Screen</span>
            ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
            <span class="token comment">// Draw a new Screen</span>
            ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>model<span class="token punctuation">.</span>width<span class="token punctuation">,</span>model<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
            <span class="token comment">// I wanna see it painted, painted black</span>
            <span class="token comment">// Black as night, black as coal</span>
            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;black&apos;</span>
            
            <span class="token comment">// Determine which output to display</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>newHighScore<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//Winners Screen has Fireworks exploding</span>
                <span class="token function">explodeFirework</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token comment">// Game-Over Screen </span>
                <span class="token comment">//Drawing each asteroid on the screen</span>
                model<span class="token punctuation">.</span>asteroidField<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">asteroid</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                asteroid<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// Assigning requestAnimationFrame value to a variable</span>
            view<span class="token punctuation">.</span>endRaF <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>endAnimationLoop<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Request the AnimationLoop</span>
        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>endAnimationLoop<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>To see this work we would simply comment out the existing view and add the following line:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// view.startScreen()</span>
<span class="token comment">// view.gameScreen()</span>
view<span class="token punctuation">.</span><span class="token function">endScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p>Now this is not quite complete, for the end screen we still need to create a way of obtaining the player name for the highscore. To do this we add the following.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">endScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">// End of Fireworks</span>
        
        <span class="token comment">// Check the Score - If the current Game is higher than the previous game then it would return and change the view.newHighScore to true</span>
        model<span class="token punctuation">.</span><span class="token function">checkScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment">// Bring back the JS-Output overlay</span>
        outputDisplay<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&apos;hide&apos;</span><span class="token punctuation">)</span>
        
        <span class="token comment">// Create a DOM element to display the List of Previous High Scores</span>
        <span class="token keyword">let</span> highScoresOutput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&apos;div&apos;</span><span class="token punctuation">)</span>
        <span class="token comment">// Apply a CSS class to the element</span>
        highScoresOutput<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;highScoresDisplay&apos;</span><span class="token punctuation">)</span>
        <span class="token comment">// Adding the Highscores data to the Ordered List</span>
        highScoresOutput<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>highScoresTable<span class="token punctuation">)</span>
        
        <span class="token comment">// Create a DOM Element to display the winner&apos;s Screen text</span>
        <span class="token keyword">let</span> winnersText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&apos;div&apos;</span><span class="token punctuation">)</span>
        <span class="token comment">// Apply a CSS class to the element</span>
        winnersText<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;newHighScore&apos;</span><span class="token punctuation">)</span>
        <span class="token comment">// Defining the inner HTML that would be rendered on the DOM</span>
        winnersText<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>
            <span class="token template-string"><span class="token string">`
                &lt;div class=&quot;title-wrapper&quot;&gt;
                    &lt;h2&gt;
                        Congratulations on Setting a New High Score
                    &lt;/h2&gt;
                &lt;/div&gt;
                &lt;div class=&quot;form-wrapper&quot;&gt;
                    &lt;input type=&quot;text&quot; name=&quot;playerName&quot; id=&quot;input-playerName&quot; placeholder=&quot;Enter Name&quot; onchange=&quot;model.playerName()&quot;&gt;
                    &lt;button type=&quot;submit&quot; onclick=&quot;model.addScore()&quot;&gt;Submit&lt;/button&gt;
                &lt;/div&gt;
            `</span></span>
        <span class="token comment">// Creating a DOM Button Element as a  Reset Button</span>
        <span class="token keyword">let</span> btnRestart <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&apos;button&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Apply a CSS Class to the Element</span>
        btnRestart<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;btn-restart&apos;</span><span class="token punctuation">)</span>
        <span class="token comment">// Placing the Text inside the button</span>
        btnRestart<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&apos;Restart Game&apos;</span>

        <span class="token comment">// If there is a new High Score </span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>newHighScore<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// Winners Screen</span>
            outputDisplay<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>highScoresOutput<span class="token punctuation">)</span>
            outputDisplay<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>winnersText<span class="token punctuation">)</span>
            outputDisplay<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>btnRestart<span class="token punctuation">)</span>            
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">//Game over Text</span>
            outputDisplay<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>highScoresOutput<span class="token punctuation">)</span>
            outputDisplay<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>btnRestart<span class="token punctuation">)</span>            

        <span class="token punctuation">}</span>
        <span class="token comment">// Populate the HighScores List</span>
        model<span class="token punctuation">.</span><span class="token function">populateHighScoresList</span><span class="token punctuation">(</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>highScoresFromStorage<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>model<span class="token punctuation">.</span>highScoresFromStorage<span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>highScoresTable<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p>A few things to note, firstly we are creating some new DOM elements these are used to display the output on the <code>outputDisplay</code> overlay that we created.</p>
<p>Secondly is the <code>winnersText</code> if you notice that within the innerHTML we are creating a input element and a button. With the input we want to get the values from the input as they either change or entered into the input field To do this we place an in-line event handler <code>onchange=&quot;model.playerName()</code>. We also place a similar event handler on the button element <code>onclick=&quot;model.addScore()&quot;</code> here we are invoking the function that allows us to store the new highscore. This method isnt really advisable from what I have read. Alot of developers discourage from using this form of event handlers, The reasons why I have to place these inline HTML event handlers is because these elements dont really exist until they are rendered. The Javascript engine hits a compliation error when we apply a typical <code>Element.addEventListener()</code> to the script. Be reassured that all other event handlers are written and declared in the proper way.</p>
<p>Now let us just define the method <code>model.playerName()</code></p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    
    <span class="token function">playerName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_playerName <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#input-playerName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>That should be it for screen views for the time being. We will be coming back to make some amendment&apos;s to make it more mobile friendly. Since we have defined the <strong>View&apos;s</strong> its now time to create a <strong>controller</strong> interface to glue the screens and the user input together.</p>
<h2 class="mume-header" id="controller">Controller</h2>

<p>The role of the controller is bringing together the user interactions- controlling the spaceship and firing the lasers with the models that hold that data like the <code>spaceship</code> which is an object instance of <code>ShipObject</code>.</p>
<p>To setup the controller we create the following class:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    <span class="token comment">// Methods</span>
<span class="token punctuation">}</span>

</pre><p>To instantiate the controller we write the following on the global scope:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Global Scope,</span>
<span class="token keyword">let</span> controller <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">GameController</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><h3 class="mume-header" id="start-and-restart-the-game">Start and Restart the Game</h3>

<p>The first few methods that we would be creating for the controller would be creating a mechanism for; starting the game, being able to reset the game, and creating a new instance of the game when the page loads.</p>
<p>Lets start with the <code>startGame()</code> method:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
    <span class="token comment">// Methods</span>
    <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">&apos;Enter&apos;</span><span class="token punctuation">:</span>
                view<span class="token punctuation">.</span><span class="token function">gameScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Here we are going to be passing in the <code>event</code> as a parameter when the handler is activated.<br>
Each <code>Event</code> is an object of sorts, it contains information about that event, whether its a &apos;click&apos; event or a &apos;keydown&apos;. Here we are extracting the <code>event.code</code> which return the corresponding keycode for the keypress. [^]</p>
<p>We are using a more efficient <code>switch</code> statement to drive the logic, since <code>if else</code> statements test based on a range of values or conditions, here we are only testing it against a single conditions. This lets us clean up the code a bit better. It also lets the compiler work slightly better, with <code>switch</code> statements, the compiler has to only check which case has to be executed instead of checking which case has been satisfied.[^] <a href="https://medium.com/@michellekwong2/switch-vs-if-else-1d458e7b0711">https://medium.com/@michellekwong2/switch-vs-if-else-1d458e7b0711</a></p>
<p>We can now apply this to the Start Screen by applying the following event handler to the window.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token function">startScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token keyword">function</span> startAnimationLoop<span class="token punctuation">{</span>
            <span class="token operator">...</span>
            <span class="token comment">//Screen Specific Event Handler</span>
            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;keydown&apos;</span><span class="token punctuation">,</span>controller<span class="token punctuation">.</span>startGame<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Reverting back to the start screen we can hit the &apos;Enter&apos; key and it should then load the <code>view.gameScreen()</code>.</p>
<p>Now to determine the game over event we place this following <code>if</code> statement in the <code>GameView.gameAnimationLoop()</code></p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameView</span><span class="token punctuation">{</span>
    <span class="token function">gameAnimationLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">//After the displaying counters and above the event listeners</span>
        <span class="token comment">//Game Over </span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>gameLives <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            view<span class="token punctuation">.</span><span class="token function">endScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>This should end the game when the lives reaches zero. Which end screen has already been determined by the <code>model.checkScore()</code> method.</p>
<p>At the end screen we wish to give the user a mechanism for restarting the game. Their is a way to do this by reloading the page when the game ends, but we would be losing all the information from the previous game session. And we would need to create another page request, resending all the data back down the wire. If the user wishes to play more than a couple of games this would be very expensive datawise. So the use of <code>document.location.reload()</code> wont apply in this respects.</p>
<p>Instead we would be creating a method on the <code>GameController</code> that clears certain fields and lets us reuse the existing game to re-play the game till our hearts content.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
    <span class="token function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Clearing the previous game data</span>
        model <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token comment">// clearing the values from the score displays</span>
        livesDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&apos;&apos;</span>
        scoreDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&apos;&apos;</span>
        currentHighScoreDisplay<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&apos;&apos;</span>
        
        <span class="token comment">//re-instantiating the game model </span>
        model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment">//Display the start screen</span>
        view<span class="token punctuation">.</span><span class="token function">startScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p>When the document loads we would also wish for it to load the game, and display the start screen to the user. For this we create the following method</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
    <span class="token function">onload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Instantiating a new Game Model</span>
        model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment">// Display the Start Screen</span>
        <span class="token keyword">return</span> view<span class="token punctuation">.</span><span class="token function">startScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Now we need to amend the original reference of the model on the global scope to being a placeholder, so we can instantiate a new model of the game whenever their is a new game.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">//Global Scope</span>
<span class="token comment">//Change</span>
<span class="token keyword">let</span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//To</span>
<span class="token keyword">let</span> model
</pre><p>Now on the global scope we are going to place a &apos;document loaded&apos; event listener to start the game when all the DOM assets have been rendered.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Making the Game Load when the DOM contents have finished Loading</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;load&apos;</span><span class="token punctuation">,</span>controller<span class="token punctuation">.</span><span class="token function">onload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><h3 class="mume-header" id="mobile-device-detection">Mobile Device Detection</h3>

<p>The controller would be used to determine if the game is on a mobile device or on a desktop. This allows us to provide two different forms of input to the user. One for the desktop where they would be using the &apos;WASD&apos; or keypad keybindings. For the Mobile we would create a Graphical UI that would allow for control over the spaceships movements and actions.</p>
<p>This following method was taken from <a href="https://dev.to/timhuang/a-simple-way-to-detect-if-browser-is-on-a-mobile-device-with-javascript-44j3">A simple way to detect if browser is on a mobile device with JavaScript</a> by Timothy Huang<br>
There is a caveat with this method. From MDN on <a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigatorID/userAgent">NavigatorID.userAgent</a></p>
<blockquote>
<p>Browser identification based on detecting the user agent string is unreliable and is not recommended, as the user agent string is user configurable.</p>
</blockquote>
<p>With that being said the test is quite solid, and if I can find a better method to use I would for sure adopt it.</p>
<p>To test whether the platform is a mobile device or not we write the following <em>getter</em> method. This would return a boolean if the test is satisfied or not. From here we can determine which form of controls and event handlers to place on the game views.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>

    <span class="token comment">/**
     * @this this.isMobile - Tests if the platform is a Mobile device or not
     */</span>
    <span class="token keyword">get</span> <span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// credit to Timothy Huang for this regex test: </span>
        <span class="token comment">// https://dev.to/timhuang/a-simple-way-to-detect-if-browser-is-on-a-mobile-device-with-javascript-44j3</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="methods-to-control-the-spaceship">Methods to control the Spaceship</h3>

<p>Here we are going to place the statements that we used to control the spaceship into individual methods. This way we can re use them without code duplication when we are creating the Event handlers to interact with the spaceship.</p>
<p>The following block should look familiar.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
     <span class="token comment">/**
     * @method spaceshipRotateClockwise
     * @description Rotate The Ship Clockwise
     */</span>
    <span class="token function">spaceshipRotateClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token function">convertRadians</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span><span class="token constant">TURN_DEG</span><span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @method spaceshipRotateAntiClockwise
     * @description Rotate the Spaceship AntiClockwise
     */</span>
    <span class="token function">spaceshipRotateAntiClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token operator">-</span><span class="token function">convertRadians</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span><span class="token constant">TURN_DEG</span><span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @method spaceshipRotateStop
     * @description Stops the ship from rotating
     */</span>
    <span class="token function">spaceshipRotateStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Stop the Ship from rotating</span>
        <span class="token keyword">return</span> spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * @method spaceshipThrusting
     * @param {Boolean} trueOrFalse
     * @description Switches the Spaceship Thrusting Flag to True if the thrust is Active, False if the Thrust is Deactivated
     *  
     */</span>
    <span class="token function">spaceshipThrusting</span><span class="token punctuation">(</span><span class="token parameter">trueOrFalse</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Move the Ship True is Thrusting False is not Thrusting</span>
        <span class="token keyword">return</span> spaceship<span class="token punctuation">.</span>thrusting <span class="token operator">=</span> trueOrFalse
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * @method spaceshipShootLaser
     * @description Fires the laser
     */</span>
    <span class="token function">spaceshipShootLaser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Fire the Lasers</span>
        <span class="token keyword">return</span> spaceship<span class="token punctuation">.</span><span class="token function">shootLasers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</pre><p>Now we have setup the methods to control the spaceship we can now redefine and create some new event handlers.</p>
<h3 class="mume-header" id="setting-up-the-event-handlers">Setting up the Event Handlers</h3>

<h4 class="mume-header" id="eventpreventdefault">event.preventDefault()</h4>

<p>Let me just quickly release some stress from a few bugs that might of crept up through the script. A common one, is where the keypad has some default behaviours for instance they control the position of the page, and can be used for navigating around a webpage. However this really does impede the game, as it causes a <em>layout Shift</em> this causes the page to be re-rendered, which leads to an incredible amount of Janking motion on the screen.</p>
<p>The same is said for clicking buttons...</p>
<p><code>event.preventDefault()</code>[^] is often the best way to disable the default browser characteristics of an event when we are wanting specific interactions overwriting the use of that buttons basic behaviour.</p>
<p>This method was used to remove some of the intrusive browser behaviour</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>

    <span class="token comment">/**
     * @method removeDefault
     * @param {EventTarget} event 
     * Removes the event default behaviours from interfering with the DOM
     */</span>
    <span class="token function">removeDefault</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Prevent default behaviour from causing DOM default actions to override the game</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</pre><p>Within the constructor we apply the following method to the window, just to make sure of deterring any unwelcome browser behaviour during gameplay.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token comment">// Applies the preventDefault() behaviours of the key&apos;s and mouse from interfering with the rendering of the game</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;mousedown&apos;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>removeDefault<span class="token punctuation">)</span>
            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;keydown&apos;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>removeDefault<span class="token punctuation">)</span>
                        
    <span class="token punctuation">}</span>
</pre><h4 class="mume-header" id="redefining-the-keypress-event-handlers">Redefining the KeyPress Event Handlers</h4>

<p>Here we are going to make some changes to the <code>model.keyDown()</code> and <code>model.keyUp()</code>. Actually we will be getting rid of them as they are now obsolete methods and run completely contrary to the MVC design pattern. Where the controller is responsible for the interactions and not the <code>GameModel</code></p>
<p>In its place we would be creating a few methods to handle both the key down and key up events and also we would be incorporating a <code>pointer</code> event listener to handle the touch interactions on mobile devices.</p>
<p>We will be using <code>switch</code> statements for these event handlers, for the same reasons that I have given above. So the previous methods:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameModel</span><span class="token punctuation">{</span>
    <span class="token comment">//methods</span>
    <span class="token function">keyDown</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowUp&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;w&apos;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Start Thrusting</span>
            spaceship<span class="token punctuation">.</span>thrusting <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowRight&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;d&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Rotate Right</span>
        spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token operator">-</span><span class="token function">convertRadians</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span><span class="token constant">TURN_DEG</span><span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowLeft&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;a&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Rotate Left</span>
        spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token function">convertRadians</span><span class="token punctuation">(</span>spaceship<span class="token punctuation">.</span><span class="token constant">TURN_DEG</span><span class="token punctuation">)</span> <span class="token operator">/</span> model<span class="token punctuation">.</span><span class="token constant">FPS</span>
        
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    <span class="token function">keyUp</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowUp&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;w&apos;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Stop Thrusting</span>
            spaceship<span class="token punctuation">.</span>thrusting <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowRight&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;d&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Stop Rotating</span>
            spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;ArrowLeft&apos;</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&apos;a&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Stop Rotating</span>
            spaceship<span class="token punctuation">.</span>rot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</pre><p>Will be rewritten to this:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
    <span class="token comment">//Event Handlers</span>
    <span class="token function">keyDown</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// Applying EventHandlers when keys are pressed</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">&quot;ArrowUp&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">// Remove the default behaviour of the event to move the page about</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipThrusting</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;KeyW&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Start Ship Thrusting</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipThrusting</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;ArrowRight&quot;</span><span class="token punctuation">:</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateAntiClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;KeyD&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Rotate Ship Anti-Clockwise</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateAntiClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;ArrowLeft&quot;</span><span class="token punctuation">:</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;KeyA&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Rotate Ship Clockwise</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;Space&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//shoot laser</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipShootLaser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">keyUp</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">&quot;ArrowUp&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Stop Thrusting</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipThrusting</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;KeyW&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Stop Thrusting</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipThrusting</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;ArrowRight&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Rotate </span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;KeyD&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Rotate </span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;ArrowLeft&quot;</span><span class="token punctuation">:</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">//Start Thrusting</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">case</span> <span class="token string">&quot;KeyA&quot;</span><span class="token punctuation">:</span>
                <span class="token comment">//Start Thrusting</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
        <span class="token punctuation">}</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>I would like to note that I had resorted to placing <code>event.preventDefault()</code> directly within the keypad buttons as this definitively nullified the browser behaviour. You might be able to guess by now that I have had some issues with the controls and might of went a bit OTT on it, I would agree but I would rather be safe than sorry...</p>
<h4 class="mume-header" id="pointer-events">Pointer Events</h4>

<p>To complete the mobile UI we need to introduce a slightly different form of event handler. Here we would be using the <code>PointerEvents</code> a pointer is multi-user interaction event object that lets us define how a touch UI would interact with the game. The pointer event feature is a supremely useful event handler to know of when thinking of mobile interactivity.</p>
<p>If works in a way a mouse would, If the target event is a certain button on the GUI we would trigger the relevant action. By using the HTML class selectors for each of the buttons we can link the mobile GUI with the game.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">GameController</span><span class="token punctuation">{</span>
    <span class="token comment">//Event Handlers</span>
    <span class="token function">pointerDown</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">&apos;btn-rotateLeft&apos;</span><span class="token punctuation">:</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">&apos;btn-rotateRight&apos;</span><span class="token punctuation">:</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateAntiClockwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">&apos;btn-thrust&apos;</span><span class="token punctuation">:</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipThrusting</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">&apos;btn-laser&apos;</span><span class="token punctuation">:</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipShootLaser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">pointerUp</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">&apos;btn-rotateLeft&apos;</span><span class="token punctuation">:</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
                
            <span class="token keyword">case</span> <span class="token string">&apos;btn-rotateRight&apos;</span><span class="token punctuation">:</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipRotateStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        
            <span class="token keyword">case</span> <span class="token string">&apos;btn-thrust&apos;</span><span class="token punctuation">:</span>
                controller<span class="token punctuation">.</span><span class="token function">spaceshipThrusting</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="the-view-at-the-top-of-the-mountain">The view at the Top of the Mountain.</h2>

<p>What a journey that has been. In the metaphorical sense I am shattered, it was an arduous climb but we have finally made it to the top.</p>
<p>I would like sincerely thank you for your participation through this journey. I hope you have enjoyed the process and equally enjoyed building your own game. I would for one be extremely interested in playing your version. I would strongly urge that you put your own stamp on it, just like I did. I found the whole process an amazing adventure and one that I wished to share with my fellow compardre&apos;s.</p>
<p>I wish you all the best of luck in your own journey. Take care and thank you again.</p>
<p>aFuzzyBear</p>
<p>You can find me on twitter @aFuzzyBear</p>
<h2 class="mume-header" id="sources">Sources</h2>

<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>Asteroids is spaced-themed shooter arcade game that was created by Lyle Rains, Ed Logg, dominic Walsh and was released in Nov 1979 by Atari Inc. Link to <a href="https://en.wikipedia.org/wiki/Asteroids_(video_game)">wiki:Asteroids</a>. <a href="#fnref1" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn2" class="footnote-item"><p>JSDocs Further information on how to use JSDocs for better commentary and use of Intellisense with IDEs <a href="https://jsdoc.app/">Link to JSDoc spec</a>. <a href="#fnref2" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn3" class="footnote-item"><p>Information on <code>window.RequestAnimationFrame</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame">MDN:Window.requestAnimationFrame()</a> <a href="#fnref3" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn4" class="footnote-item"><p>Radians in JavaScript: <a href="http://www.idc-online.com/technical_models/pdfs/information_technology/Radians_and_degrees_in_Javascript.pdf">Link to paper</a> <a href="#fnref4" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn5" class="footnote-item"><p>Further explanation on geometric distance.<br>
<a href="https://ncalculators.com/geometry/length-between-two-points-calculator.htm#:~:text=The%20distance%20between%20two%20points%20is%20the%20length%20of%20the,length%20are%20called%20congruent%20segments.">Online Explanation.</a><br>
<a href="https://en.wikipedia.org/wiki/Distance">wiki:Distance</a>. <a href="#fnref5" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn6" class="footnote-item"><p>Further information on the maths behind calculating the distance between two circles <a href="https://www.whitman.edu/mathematics/calculus_online/section01.02.html">Link to explanation.</a><br>
<a href="https://stackoverflow.com/questions/5509151/finding-the-distance-between-two-circles">Link to StackOverflow</a>. <a href="#fnref6" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn7" class="footnote-item"><p>Further information on Model-View-Controllers as a design pattern:<br>
<a href="https://developer.chrome.com/apps/app_frameworks">Chrome-MVC Architecture</a><br>
<a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">Wiki: Model-view-controller</a> <a href="#fnref7" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn8" class="footnote-item"><p>Further information on the use of class based object model over Object.prototype inheritance<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Details_of_the_Object_Model">MDN: Details on the Object Model</a> <a href="#fnref8" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn9" class="footnote-item"><p>Further information on using the Getter Object Accessor Function <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/model/Functions/get">MDN:function-Get</a> <a href="#fnref9" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn10" class="footnote-item"><p>Further information on looping backwards through an Array in Javascript<br>
<a href="https://stackoverflow.com/questions/3520688/javascript-loop-performance-why-is-to-decrement-the-iterator-toward-0-faster-t">StackOverflow: JavaScript loop Performance</a><br>
<a href="https://www.programmer-books.com/wp-content/uploads/2019/08/Even-Faster-Web-Sites.pdf">Even-faster-Websites-Fast-Loops-pg93-98</a><br>
<a href="https://www.techiedelight.com/loop-through-array-backwards-javascript/">Techniques to loop backwards through an array in JS</a> <a href="#fnref10" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn11" class="footnote-item"><p>Further Information on Game Loops and cancelAnimationFrame:<br>
<a href="https://developer.mozilla.org/en-US/docs/Games/Anatomy">MDN:Anatomy of a Video Game</a><br>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelAnimationFrame">MDN:window.cancelAnimationFrame()</a> <a href="#fnref11" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
</ol>
</section>

      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>